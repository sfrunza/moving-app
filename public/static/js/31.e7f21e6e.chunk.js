(this["webpackJsonp@devias-io/material-kit-pro-react"]=this["webpackJsonp@devias-io/material-kit-pro-react"]||[]).push([[31],{2184:function(e,t,a){"use strict";a.r(t);var n=a(11),l=a(0),o=a.n(l),r=a(1566),c=a(1398),i=a(268),s=a(31),m=a.n(s),u=a(131),d=a(7),p=a(2),b=a(6),g=a(64),E=Object(r.a)((function(e){return{root:{marginTop:"4rem"},toolbar:{"& > * + *":{marginLeft:e.spacing(1)}},deleteButton:{color:e.palette.common.white,backgroundColor:b.a.red[600],"&:hover":{backgroundColor:b.a.red[900]}},openDeleteButton:{color:b.a.red[600],border:"1px solid ".concat(b.a.red[500]),"&:hover":{backgroundColor:b.a.red[50]}},deleteIcon:{marginRight:e.spacing(1)}}}));var f=function(e){e.handleDelete;var t=e.job,a=e.className,n=Object(d.a)(e,["handleDelete","job","className"]),l=E();return void 0===t?null:o.a.createElement("div",Object.assign({},n,{className:Object(p.a)(l.root,a)}),o.a.createElement(i.a,{alignItems:"flex-end",container:!0,justify:"space-between",spacing:3},o.a.createElement(i.a,{item:!0},o.a.createElement(g.a,{variant:"h3",color:"textPrimary"},"Request ID: ",t.id))))},h=(a(110),a(1384)),j=a(1396),x=a(1368),v=a(1385),y=a(1399),O=a(1400),N=a(1401),I=a(1402),D=a(414),w=a(412),S=a(323),C=a.n(S),M=a(1649),_=a(1644);var k=function(e){var t=e.userId,a=e.job,c=e.className,i=Object(d.a)(e,["userId","job","className"]),s=Object(l.useState)(),u=Object(n.a)(s,2),g=u[0],E=u[1],f=a.job_status,S=function(e){var t=(""+e).replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return t?"("+t[1]+") "+t[2]+"-"+t[3]:null},k={"Needs Attention":b.a.orange[600],Canceled:b.a.red[600],Completed:b.a.blue[600],Confirmed:b.a.green[600]},Y=Object(r.a)((function(e){return{root:{},content:{padding:0,"& .MuiTableCell-root":{borderBottom:"none"}},heading:{textAlign:"center",color:k[f],border:"1px solid",borderRadius:"3px",margin:"auto",display:"inline-block",padding:"5px 5px"},actions:{flexDirection:"column",alignItems:"flex-start","& > * + *":{marginLeft:0}},name:{color:b.a.grey[900],fontSize:"16px",fontWeight:"bold",textDecoration:"none","&:hover":{textDecoration:"none"}},emailButton:{color:b.a.grey[700],display:"flex",alignItems:"center",textDecoration:"none"},phoneButton:{fontSize:"16px",color:b.a.grey[700],display:"flex",alignItems:"center",textDecoration:"none","&:hover":{color:C.a[500],textDecoration:"none"}},buttonIcon:{marginRight:e.spacing(1)},infoField:{display:"flex",flexDirection:"column",alignItems:"center"}}}))();return Object(l.useEffect)((function(){var e=!0;return m.a.get("/api/v1/users/".concat(t)).then((function(t){e&&E(t.data.user)})),function(){e=!1}}),[t]),g?o.a.createElement(h.a,Object.assign({},i,{className:Object(p.a)(Y.root,c)}),o.a.createElement(j.a,{style:{textAlign:"center"},classes:{title:Y.heading},title:a.job_status}),o.a.createElement(x.a,null),o.a.createElement(v.a,{className:Y.content},o.a.createElement(y.a,null,o.a.createElement(O.a,{style:{display:"flex",flexDirection:"column"}},o.a.createElement(N.a,null,o.a.createElement(I.a,{className:Y.infoField},o.a.createElement(D.a,{src:"https://toppng.com/uploads/preview/roger-berry-avatar-placeholder-11562991561rbrfzlng6h.png",style:{height:"70px",width:"70px",marginBottom:"1em"}}),o.a.createElement(w.a,{className:Y.name},g.first_name," ",g.last_name),o.a.createElement(w.a,{mt:1},o.a.createElement("a",{className:Y.phoneButton,href:"tel:".concat(g.phone)},o.a.createElement(M.a,{style:{height:"15px"}}),10===g.phone.length?S(g.phone):g.phone)),g.add_phone?o.a.createElement(w.a,{mt:1},o.a.createElement("a",{className:Y.phoneButton,href:"tel:".concat(g.add_phone)},o.a.createElement(M.a,{style:{height:"15px"}}),10===g.add_phone.length?S(g.add_phone):g.add_phone)):null,o.a.createElement(w.a,{mt:1,className:Y.emailButton},o.a.createElement(_.a,{style:{height:"15px"}}),g.email))))))):null},Y=a(5),A=a.n(Y),B=a(210),T=a(379),W=a(241),z=a(59),L=a(562),R=a.n(L),F=a(1366),H=(a(121),Object(z.a)((function(e){return{root:{},imageStyle:{}}})));var P=Object(F.a)()((function(e){var t=e.className,a=e.images,r=Object(d.a)(e,["className","images"]),c=H(),i=Object(l.useState)(0),s=Object(n.a)(i,2),m=s[0],u=s[1],b=[];return a.map((function(e){b.push({src:e.photo.url,thumbnailWidth:3,thumbnailHeight:2,thumbnail:e.photo.url,id:e.id})})),b.map((function(e){m==b.indexOf(e)&&e.id})),o.a.createElement("div",Object.assign({className:Object(p.a)(c.root,t)},r),o.a.createElement(w.a,{mt:2},o.a.createElement(R.a,{images:b,enableLightbox:!0,enableImageSelection:!1,rowHeight:50,currentImageWillChange:function(e){u(e)}})))})),q=a(55),G=a.n(q),U=a(97),V=a(28),J=a(87),K=a(213),Q=a(132),$=a(863),Z=(a(905),a(546)),X=Object(z.a)((function(){return{root:{},card:{backgroundColor:"transparent",boxShadow:"none"},buttonCamera:{width:"100%"}}}));var ee=function(e){var t=e.className,a=e.jobId,n=e.setImages,l=e.images,r=Object(d.a)(e,["className","jobId","setImages","images"]),c=X(),s=(Object(V.g)(),Object(Q.b)().enqueueSnackbar);return o.a.createElement(K.b,{initialValues:{photo:null,image:"",job_id:a},validationSchema:J.c().shape({}),onSubmit:function(){var e=Object(U.a)(G.a.mark((function e(t,a){var o,r,c,i,m;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=a.setErrors,r=a.setStatus,c=a.setSubmitting,i=a.resetForm;try{(m=new FormData).append("image",t.image),m.append("job_id",t.job_id),m.append("photo",t.photo),fetch("/api/v1/images.json",{method:"POST",body:m}).then((function(e){return e.json()})).then((function(e){n(l.concat(e))})).catch((function(e){return console.log(e)})),i({}),r({success:!0}),c(!1),s("Image Added",{variant:"success"})}catch(u){o({submit:u.message}),r({success:!1}),c(!1)}case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},(function(e){var a=e.errors,n=(e.handleBlur,e.handleChange,e.handleSubmit),l=(e.isSubmitting,e.setFieldValue);e.touched,e.values;return o.a.createElement("form",Object.assign({onSubmit:n,className:Object(p.a)(c.root,t)},r),o.a.createElement(i.a,{className:c.buttonCamera},o.a.createElement(h.a,{className:c.card},o.a.createElement(v.a,null,o.a.createElement(Z.a,{setFieldValue:l,handleSubmit:n,text:"Add Photo to Inventory"})))),a.submit&&o.a.createElement(w.a,{mt:3},o.a.createElement($.a,{error:!0},a.submit)))}))},te=Object(r.a)((function(e){return{root:{},content:{padding:0,"& .MuiTableCell-root":{borderBottom:"none"}},headerDistance:{textAlign:"center",padding:"10px 0em"},addInfoContainer:{display:"flex",flexDirection:"column",padding:"0px 15px"},addInfoTitle:{fontSize:"14px",color:C.a.A200,textTransform:"uppercase",fontWeight:"bold"},addInfoSubTitle:{backgroundColor:"#f7f7f7",padding:"15px",wordWrap:"break-word",display:"flex",flexDirection:"column"}}}));var ae=function(e){var t=e.job,a=e.className,r=e.images,c=e.setImages,i=Object(d.a)(e,["job","className","images","setImages"]),s=te(),u=window.google=window.google?window.google:{},b=Object(l.useState)(),g=Object(n.a)(b,2),E=g[0],f=g[1],D=Object(l.useState)(),S=Object(n.a)(D,2),M=S[0],_=S[1];return Object(l.useEffect)((function(){var e=!0;return m.a.get("/api/v1/jobs/".concat(t.id)).then((function(t){e&&_(t.data)})),function(){e=!1}}),[t.id]),M?o.a.createElement(h.a,Object.assign({},i,{className:Object(p.a)(s.root,a)}),o.a.createElement(j.a,{title:"Move Overview"}),M?function(){var e=M.origin.address,t=M.destination.address,a=Object(W.compose)(Object(W.withProps)({googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyADEDKabHN5FBcOroOU1W7BzUam0Az8gGQ","&v=3.exp&libraries=geometry,drawing,places"),loadingElement:o.a.createElement("div",{style:{height:"100%"}}),containerElement:o.a.createElement("div",{style:{height:"200px",width:"95%",margin:"auto"}}),mapElement:o.a.createElement("div",{style:{height:"100%"}})}),T.withGoogleMap,Object(W.lifecycle)({componentDidMount:function(){var a=this;(new u.maps.DirectionsService).route({origin:e,destination:t,travelMode:u.maps.TravelMode.DRIVING},(function(e,t){t===u.maps.DirectionsStatus.OK&&(a.setState({directions:e}),f(e.routes[0].legs[0].distance.text))}))}}))((function(e){return o.a.createElement(T.GoogleMap,{defaultZoom:7,defaultCenter:new u.maps.LatLng(42.5659907,-72.2317007)},e.directions&&o.a.createElement(T.DirectionsRenderer,{directions:e.directions}))}));return o.a.createElement(a,{google:u})}():null,o.a.createElement(v.a,{className:s.content},o.a.createElement(w.a,{className:s.headerDistance},E),o.a.createElement(x.a,null),o.a.createElement(y.a,null,o.a.createElement(O.a,null,o.a.createElement(N.a,null,o.a.createElement(I.a,null,"Moving Date: "),o.a.createElement(I.a,{style:{fontWeight:"bold"}},M.job.delivery_date?o.a.createElement(w.a,null,A()(M.job.pick_up_date,"MM/DD/YYYY").format("MMM DD, YYYY")," ",o.a.createElement("span",{style:{fontSize:"12px",marginLeft:"10px",fontWeight:300}},"to storage")):A()(M.job.pick_up_date,"MM/DD/YYYY").format("MMM DD, YYYY"))),null===M.job.delivery_date?null:o.a.createElement(N.a,null,o.a.createElement(I.a,null,"Delivery Date: "),o.a.createElement(I.a,{style:{fontWeight:"bold"}},A()(M.job.delivery_date,"MM/DD/YYYY").format("MMM DD, YYYY"))),o.a.createElement(N.a,null,o.a.createElement(I.a,null,"Moving From: "),o.a.createElement(I.a,null,o.a.createElement(w.a,null,o.a.createElement(B.a,{style:{padding:"0px"},onClick:function(){window.open("https://maps.google.com?q=".concat(M.origin.address))}},M.origin.address)),o.a.createElement(w.a,{component:"div",display:"inline",style:{fontWeight:"bold"}},"*",M.origin.floor),o.a.createElement(w.a,{component:"div",display:"inline",ml:2},"Apt# ",M.origin.apt_number))),o.a.createElement(N.a,null,o.a.createElement(I.a,null,"Moving To:"),o.a.createElement(I.a,null,o.a.createElement(w.a,null,o.a.createElement(B.a,{style:{padding:"0px"},onClick:function(){window.open("https://maps.google.com?q=".concat(M.destination.address))}},M.destination.address)),o.a.createElement(w.a,{component:"div",display:"inline",style:{fontWeight:"bold"}},"*",M.destination.floor),o.a.createElement(w.a,{component:"div",display:"inline",ml:2},"Apt# ",M.destination.apt_number))),o.a.createElement(N.a,null,o.a.createElement(I.a,{style:{padding:"0px"}},o.a.createElement(x.a,null)),o.a.createElement(I.a,{style:{padding:"0px"}},o.a.createElement(x.a,null))),o.a.createElement(N.a,null,o.a.createElement(I.a,null,"Moving Type:"),o.a.createElement(I.a,null,M.job.job_type)),o.a.createElement(N.a,null,o.a.createElement(I.a,null,"Moving Size:"),o.a.createElement(I.a,{style:{fontWeight:600}},M.job.job_size)),o.a.createElement(N.a,null,o.a.createElement(I.a,{style:{padding:"0px"}},o.a.createElement(x.a,null)),o.a.createElement(I.a,{style:{padding:"0px"}},o.a.createElement(x.a,null))),o.a.createElement(N.a,null,o.a.createElement(I.a,null,"Crew:"),o.a.createElement(I.a,{style:{fontWeight:600}},M.job.crew_size," Movers")),o.a.createElement(N.a,null,o.a.createElement(I.a,null,"Rate:"),o.a.createElement(I.a,{style:{color:C.a.A200,fontSize:"18px",fontWeight:"bold"}},o.a.createElement("label",null,"$ ",M.job.job_rate)," / hr ",o.a.createElement("label",{style:{color:"grey",fontSize:"12px",fontStyle:"italic",fontWeight:"normal"}}," - billed in 15 minutes increment"))),o.a.createElement(N.a,null,o.a.createElement(I.a,null,"Estimated Time:"),o.a.createElement(I.a,{style:{color:"#FD7013",fontSize:"18px",fontWeight:"bold"}},o.a.createElement("label",null,M.job.estimated_time)," hours*")),o.a.createElement(N.a,null,o.a.createElement(I.a,null,"Travel Time:"),o.a.createElement(I.a,null,o.a.createElement("label",null,M.job.travel_time," (from/to HQ)"))),o.a.createElement(N.a,null,o.a.createElement(I.a,null,"Estimated Quote:"),o.a.createElement(I.a,{style:{fontWeight:600,fontSize:"18px"}},o.a.createElement("label",null,M.job.estimated_quote))))),o.a.createElement(w.a,{mt:2,className:s.addInfoContainer},o.a.createElement(w.a,{className:s.addInfoTitle},"Additional Information:"),o.a.createElement(w.a,{mt:2,className:s.addInfoSubTitle},M.job.additional_info,o.a.createElement(P,{images:r}),o.a.createElement(ee,{jobId:M.job.id,images:r,setImages:c}))))):null},ne=a(315),le=a(521),oe=a(1373),re=a(427),ce=a.n(re),ie=a(270),se=a(272),me=a.n(se),ue=a(200),de=a.n(ue),pe=a(426),be=a.n(pe),ge=a(274),Ee=a.n(ge),fe=Object(z.a)((function(e){return{root:{},deleteAction:{color:e.palette.common.white,backgroundColor:e.palette.error.main,"&:hover":{backgroundColor:e.palette.error.dark}},actionIcon:{marginRight:e.spacing(1)},cardHeader:{textAlign:"center"},button:{display:"flex",width:"100%",justifyContent:"flex-start"},arrow:{marginLeft:"auto"},menuBox:{flexDirection:"column",width:"100%"},menuBoxActive:{backgroundColor:"#0000000a"},statusBox:{marginTop:"-10px","& span ":{fontSize:"10px",backgroundColor:"transparent"}},topInfo:{display:"flex",flexDirection:"row",justifyContent:"space-between"}}}));var he=function(e){var t=e.className,a=e.userId,r=e.history,c=e.job,i=Object(d.a)(e,["className","userId","history","job"]),s=fe(),u=Object(l.useRef)(null),b=Object(l.useState)(!1),E=Object(n.a)(b,2),f=E[0],y=E[1],O=Object(l.useState)(),N=Object(n.a)(O,2),I=N[0],D=N[1],S=Object(l.useState)(),C=Object(n.a)(S,2),M=C[0],_=C[1],k=Object(l.useState)(),Y=Object(n.a)(k,2),T=Y[0],W=Y[1],z=c.id;if(Object(l.useEffect)((function(){var e=!0;return m.a.get("/api/v1/users/".concat(a)).then((function(t){e&&(D(t.data.jobs),_(t.data.origins),W(t.data.destinations))})),function(){e=!1}}),[a]),!I||!M||!T)return null;var L=function(e){return e.split(",").splice(1,2).join(",")};return o.a.createElement(h.a,Object.assign({className:Object(p.a)(s.root,t)},i),o.a.createElement(j.a,{title:"HELPFUL LINKS",className:s.cardHeader}),o.a.createElement(x.a,null),o.a.createElement(v.a,null,o.a.createElement(w.a,{display:"flex",flexDirection:"column",alignItems:"flex-start"},o.a.createElement(B.a,{className:s.button,component:ne.a,onClick:function(){y(!0)},ref:u},o.a.createElement(be.a,{className:s.actionIcon}),"My Moves History (",I.length,")",o.a.createElement(de.a,{className:Object(p.a)(s.actionIcon,s.arrow)})),o.a.createElement(le.a,{onClose:function(){y(!1)},anchorOrigin:{vertical:"bottom",horizontal:"center"},keepMounted:!0,getContentAnchorEl:null,anchorEl:u.current,open:f,PaperProps:{style:{maxHeight:288},className:s.popover}},I.map((function(e,t){var a="",n="";return M.map((function(t){t.job_id===e.id&&(a=t.address)})),T.map((function(t){t.job_id===e.id&&(n=t.address)})),o.a.createElement(oe.a,{key:t,open:f,className:e.id===z?s.menuBoxActive:null,onClick:function(){r.push("/calendar/".concat(e.id))}},o.a.createElement(w.a,{display:"flex",className:s.menuBox},o.a.createElement(w.a,{className:s.topInfo},o.a.createElement(w.a,null,A()(e.pick_up_date,"MM/DD/YYYY").format("MMM DD, YYYY")),o.a.createElement(w.a,null,L(a)),o.a.createElement(w.a,null,o.a.createElement(Ee.a,null)),o.a.createElement(w.a,null,L(n))),o.a.createElement(w.a,{className:s.statusBox},function(e){var t={Completed:{text:"Completed",color:"secondary"},Canceled:{text:"Canceled",color:"error"},"Needs Attention":{text:"Needs Attention",color:"warning"},Confirmed:{text:"Confirmed",color:"success"}}[e],a=t.text,n=t.color;return o.a.createElement(ie.a,{color:n},a)}(e.job_status)),o.a.createElement(x.a,null)))}))),o.a.createElement(B.a,{className:s.button},o.a.createElement(ce.a,{className:s.actionIcon}),"Certificate of Insurance",o.a.createElement(de.a,{className:Object(p.a)(s.actionIcon,s.arrow)})),o.a.createElement(B.a,{className:s.button},o.a.createElement(me.a,{className:s.actionIcon}),"Bill of Lading",o.a.createElement(de.a,{className:Object(p.a)(s.actionIcon,s.arrow)}))),o.a.createElement(w.a,{mt:1,mb:2},o.a.createElement(g.a,{variant:"body2",color:"textSecondary"},"Remove this customer\u2019s data if he requested that, if not please be aware that what has been deleted can never brough back"))))},je=Object(r.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,paddingTop:e.spacing(3),paddingBottom:e.spacing(3)},grid:{marginTop:e.spacing(2)},otherActions:{marginTop:"2em"}}}));t.default=function(e){var t=e.match,a=e.history,r=je(),s=t.params.jobId,d=Object(l.useState)(),p=Object(n.a)(d,2),b=p[0],g=p[1],E=Object(l.useState)(),h=Object(n.a)(E,2),j=h[0],x=h[1];return Object(l.useEffect)((function(){var e=!0;return m.a.get("/api/v1/jobs/".concat(s)).then((function(t){e&&(g(t.data.job),x(t.data.images))})).catch((function(e){a.push("/calendar")})),function(){e=!1}}),[s]),b?o.a.createElement(u.a,{className:r.root,title:"Job Details"},o.a.createElement(c.a,{maxWidth:!1},o.a.createElement(f,{job:b}),o.a.createElement(i.a,{className:r.grid,container:!0,spacing:3},o.a.createElement(i.a,{item:!0,md:4,xl:3,xs:12},o.a.createElement(i.a,{item:!0},o.a.createElement(k,{userId:b.user_id,job:b}),o.a.createElement(he,{job:b,userId:b.user_id,className:r.otherActions,history:a}))),o.a.createElement(i.a,{item:!0,md:8,xl:9,xs:12},o.a.createElement(ae,{job:b,images:j,setImages:x}))))):null}}}]);
//# sourceMappingURL=31.e7f21e6e.chunk.js.map