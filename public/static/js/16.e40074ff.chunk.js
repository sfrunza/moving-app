(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[16],{405:function(e,t,a){"use strict";var c=a(5),n=a(10),r=a(0),s=a(423),i=a.n(s),o=a(303),l=a(1),j=["children"],b=Object(r.forwardRef)((function(e,t){var a=e.children,r=Object(n.a)(e,j);return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?Object(l.jsx)(o.a,{ref:t,sx:{overflowX:"auto"},children:a}):Object(l.jsx)(i.a,Object(c.a)(Object(c.a)({ref:t},r),{},{children:a}))}));t.a=b},406:function(e,t,a){"use strict";var c=a(5),n=a(14),r=a(10),s=(a(0),a(3)),i=a(21),o=a(219),l=a(1),j=["className","color","children"],b=Object(o.a)((function(e){return{root:{fontWeight:600,letterSpacing:.5,minWidth:20,padding:e.spacing(.5,1),borderRadius:4},primary:{color:e.palette.primary.main,backgroundColor:Object(i.a)(e.palette.primary.main,.08)},secondary:{color:e.palette.secondary.main,backgroundColor:Object(i.a)(e.palette.secondary.main,.08)},error:{color:e.palette.error.main,backgroundColor:Object(i.a)(e.palette.error.main,.08)},success:{color:e.palette.success.main,backgroundColor:Object(i.a)(e.palette.success.main,.08)},warning:{color:e.palette.warning.main,backgroundColor:Object(i.a)(e.palette.warning.main,.08)}}}));function d(e){var t=e.className,a=e.color,i=e.children,o=Object(r.a)(e,j),d=b();return Object(l.jsx)("span",Object(c.a)(Object(c.a)({className:Object(s.a)(d.root,Object(n.a)({},d[a],a),t)},o),{},{children:i}))}d.defaultProps={className:"",color:"secondary"},t.a=d},413:function(e,t,a){"use strict";a(0);var c=a(406),n=a(1);t.a=function(e){var t={Completed:{text:"Completed",color:"success"},Canceled:{text:"Canceled",color:"error"},"Needs Attention":{text:"Needs Attention",color:"warning"},Confirmed:{text:"Confirmed",color:"primary"}}[e.status],a=t.text,r=t.color;return Object(n.jsx)(c.a,{color:r,children:a})}},971:function(e,t,a){"use strict";a.r(t);var c=a(39),n=a(0),r=a(219),s=a(303),i=a(365),o=a(379),l=a(367),j=a(364),b=a(55),d=a(29),h=a(343),O=a(66),u=a(432),m=a(412),x=a(87),p=a(1);var f=function(e){var t=e.customer;return Object(p.jsx)(h.a,{container:!0,justifyContent:"space-between",spacing:3,children:Object(p.jsxs)(h.a,{item:!0,children:[Object(p.jsx)(O.a,{color:"textPrimary",variant:"h5",children:t.first_name+" "+t.last_name}),Object(p.jsxs)(u.a,{"aria-label":"breadcrumb",separator:Object(p.jsx)(x.a,{fontSize:"small"}),style:{marginTop:8},children:[Object(p.jsx)(m.a,{color:"textPrimary",component:d.b,to:"/dashboard",variant:"subtitle2",children:"Dashboard"}),Object(p.jsx)(m.a,{color:"textPrimary",component:d.b,to:"/dashboard/customers",variant:"subtitle2",children:"Customers"}),Object(p.jsx)(O.a,{color:"textSecondary",variant:"subtitle2",children:t.first_name+" "+t.last_name})]})]})})},v=a(5),g=a(10),y=a(3),_=a(344),N=a(375),C=a(389),w=a(300),S=a(371),P=a(373),k=a(369),D=a(368),I=a(347),E=a(622),z=a.n(E),W=a(623),A=a.n(W),Y=a(168),M=["customer","className"],R=Object(r.a)((function(e){return{root:{},actionIcon:{marginRight:e.spacing(1)},headerAction:{margin:0},editIcon:{color:e.palette.primary.main}}}));var F=function(e){var t=e.customer,a=(e.className,Object(g.a)(e,M),R()),c=function(e){var t=(""+e).replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return t?"("+t[1]+") "+t[2]+"-"+t[3]:null};return Object(p.jsxs)(_.a,{children:[Object(p.jsx)(N.a,{title:"Customer info",action:Object(p.jsx)(C.a,{title:"Edit",children:Object(p.jsx)(w.a,{"aria-label":"edit",classes:{root:a.editIcon},children:Object(p.jsx)(Y.a,{})})}),classes:{action:a.headerAction}}),Object(p.jsx)(j.a,{}),Object(p.jsx)(S.a,{children:Object(p.jsxs)(P.a,{children:[Object(p.jsxs)(k.a,{children:[Object(p.jsx)(D.a,{children:"First name"}),Object(p.jsx)(D.a,{children:Object(p.jsx)(O.a,{variant:"body2",color:"textSecondary",children:t.first_name})})]}),Object(p.jsxs)(k.a,{children:[Object(p.jsx)(D.a,{children:"Last name"}),Object(p.jsx)(D.a,{children:Object(p.jsx)(O.a,{variant:"body2",color:"textSecondary",children:t.last_name})})]}),Object(p.jsxs)(k.a,{children:[Object(p.jsx)(D.a,{children:"Email"}),Object(p.jsx)(D.a,{children:Object(p.jsx)(O.a,{variant:"body2",color:"textSecondary",children:t.email})})]}),Object(p.jsxs)(k.a,{children:[Object(p.jsx)(D.a,{children:"Phone"}),Object(p.jsx)(D.a,{children:Object(p.jsx)(O.a,{variant:"body2",color:"textSecondary",children:c(t.phone)})})]}),t.add_phone?Object(p.jsxs)(k.a,{children:[Object(p.jsx)(D.a,{className:a.fontWeightMedium,children:"Secondary Phone"}),Object(p.jsx)(D.a,{children:Object(p.jsx)(O.a,{variant:"body2",color:"textSecondary",children:c(t.add_phone)})})]}):null]})}),Object(p.jsxs)(s.a,{p:1,display:"flex",flexDirection:"column",alignItems:"flex-start",children:[Object(p.jsxs)(I.a,{children:[Object(p.jsx)(z.a,{className:a.actionIcon}),"Reset & Send Password"]}),Object(p.jsxs)(I.a,{children:[Object(p.jsx)(A.a,{className:a.actionIcon}),"Login as Customer"]})]})]})},q=a(345),L=a(624),T=a.n(L),U=a(625),B=a.n(U),J=a(626),V=a.n(J),$=["className"],H=Object(r.a)((function(e){return{root:{},actionIcon:{marginRight:e.spacing(1)}}}));var X=function(e){var t=e.className,a=Object(g.a)(e,$),c=H();return Object(p.jsxs)(_.a,Object(v.a)(Object(v.a)({className:Object(y.a)(c.root,t)},a),{},{children:[Object(p.jsx)(N.a,{title:"Other actions"}),Object(p.jsx)(j.a,{}),Object(p.jsxs)(q.a,{children:[Object(p.jsxs)(s.a,{display:"flex",flexDirection:"column",alignItems:"flex-start",children:[Object(p.jsxs)(I.a,{children:[Object(p.jsx)(T.a,{className:c.actionIcon}),"Close Account"]}),Object(p.jsxs)(I.a,{children:[Object(p.jsx)(B.a,{className:c.actionIcon}),"Export Data"]})]}),Object(p.jsx)(s.a,{mt:1,mb:2,children:Object(p.jsx)(O.a,{variant:"body2",color:"textSecondary",children:"Remove this customer\u2019s data if he requested that, if not please be aware that what has been deleted can never brough back"})}),Object(p.jsxs)(I.a,{variant:"contained",color:"secondary",disableElevation:!0,children:[Object(p.jsx)(V.a,{className:c.actionIcon}),"Delete Account"]})]})]}))},G=a(14),K=a(382),Q=a(115),Z=a(172),ee=a.n(Z),te=a(144),ae=a(90),ce=a(116),ne=a(105),re=Object(r.a)((function(e){return{label:{fontWeight:500,marginBottom:e.spacing(1),display:"inline-block",color:e.palette.text.secondary},icon:{marginRight:e.spacing(2),top:6,width:20,position:"relative"},inputWidth:{width:"calc(100% - 33px)",marginLeft:33}}})),se={email:{presence:{allowEmpty:!1,message:"is required"},email:{message:"is not valid"}},phone:{presence:{allowEmpty:!1,message:"is required"},format:{pattern:/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/,message:"is not valid"}},first_name:{presence:{allowEmpty:!1,message:"is required"}},last_name:{presence:{allowEmpty:!1,message:"is required"}}},ie=function(e){var t=e.user,a=e.handleUpdate,r=e.isUpdating,i={first_name:t.first_name,last_name:t.last_name,email:t.email,phone:t.phone,add_phone:t.add_phone},o=re(),l=Object(Q.b)().enqueueSnackbar,b=Object(n.useState)({isValid:!1,values:i,touched:{},errors:{}}),d=Object(c.a)(b,2),O=d[0],u=d[1];Object(n.useEffect)((function(){var e=ee()(O.values,se);u((function(t){return Object(v.a)(Object(v.a)({},t),{},{isValid:!e,errors:e||{}})}))}),[O.values,t]);var m=function(e){e.persist(),"phone"===e.target.name?u((function(t){return Object(v.a)(Object(v.a)({},t),{},{values:Object(v.a)(Object(v.a)({},t.values),{},{phone:"1"===e.target.value?"":Object(ne.b)(Object(ne.a)(e.target.value))}),touched:Object(v.a)(Object(v.a)({},t.touched),{},{phone:!0})})})):"add_phone"===e.target.name?u((function(t){return Object(v.a)(Object(v.a)({},t),{},{values:Object(v.a)(Object(v.a)({},t.values),{},{add_phone:"1"===e.target.value?"":Object(ne.b)(Object(ne.a)(e.target.value))}),touched:Object(v.a)(Object(v.a)({},t.touched),{},{add_phone:!0})})})):u((function(t){return Object(v.a)(Object(v.a)({},t),{},{values:Object(v.a)(Object(v.a)({},t.values),{},Object(G.a)({},e.target.name,"checkbox"===e.target.type?e.target.checked:e.target.value)),touched:Object(v.a)(Object(v.a)({},t.touched),{},Object(G.a)({},e.target.name,!0))})}))},x=function(e){return!(!O.touched[e]||!O.errors[e])};return Object(p.jsx)("form",{name:"password-reset-form",method:"post",onSubmit:function(e){e.preventDefault(),O.isValid&&(a(t.id,O.values),l("Customer updated",{anchorOrigin:{horizontal:"right",vertical:"top"},variant:"success"})),u((function(e){return Object(v.a)(Object(v.a)({},e),{},{touched:Object(v.a)(Object(v.a)({},e.touched),e.errors)})}))},children:Object(p.jsxs)(_.a,{children:[Object(p.jsx)(N.a,{title:"Profile"}),Object(p.jsx)(j.a,{}),Object(p.jsx)(q.a,{children:Object(p.jsxs)(h.a,{container:!0,spacing:3,children:[Object(p.jsxs)(h.a,{item:!0,xs:12,md:6,children:[Object(p.jsxs)("label",{htmlFor:"first_name",className:o.label,children:[Object(p.jsx)(te.a,{className:o.icon}),"First name"]}),Object(p.jsx)(K.a,{error:x("first_name"),className:o.inputWidth,name:"first_name",id:"first_name",size:"small",value:O.values.first_name||"",onChange:m,variant:"outlined",helperText:x("first_name")?O.errors.first_name:null})]}),Object(p.jsxs)(h.a,{item:!0,xs:12,md:6,children:[Object(p.jsxs)("label",{htmlFor:"last_name",className:o.label,children:[Object(p.jsx)(te.a,{className:o.icon}),"Last name"]}),Object(p.jsx)(K.a,{error:x("last_name"),className:o.inputWidth,name:"last_name",id:"last_name",size:"small",onChange:m,value:O.values.last_name,variant:"outlined",helperText:x("last_name")?O.errors.last_name:null})]}),Object(p.jsxs)(h.a,{item:!0,xs:12,md:6,children:[Object(p.jsxs)("label",{htmlFor:"email",className:o.label,children:[Object(p.jsx)(ae.a,{className:o.icon}),"Email address"]}),Object(p.jsx)(K.a,{error:x("email"),className:o.inputWidth,name:"email",id:"email",size:"small",onChange:m,value:O.values.email||"",variant:"outlined",helperText:x("email")?O.errors.email[0]:null})]}),Object(p.jsxs)(h.a,{item:!0,xs:12,md:6,children:[Object(p.jsxs)("label",{htmlFor:"phone",className:o.label,children:[Object(p.jsx)(ce.a,{className:o.icon}),"Phone"]}),Object(p.jsx)(K.a,{error:x("phone"),className:o.inputWidth,name:"phone",id:"phone",size:"small",onChange:m,value:O.values.phone||"",variant:"outlined",helperText:x("phone")?O.errors.phone[0]:null})]}),Object(p.jsxs)(h.a,{item:!0,xs:12,md:6,children:[Object(p.jsxs)("label",{htmlFor:"phone",className:o.label,children:[Object(p.jsx)(ce.a,{className:o.icon}),"Secondary Phone"]}),Object(p.jsx)(K.a,{className:o.inputWidth,name:"add_phone",id:"add_phone",size:"small",onChange:m,value:O.values.add_phone||"",variant:"outlined"})]})]})}),Object(p.jsx)(s.a,{p:2,display:"flex",justifyContent:"flex-end",children:Object(p.jsx)(I.a,{color:"primary",disabled:function(e,t){var a=Object.keys(e),c=Object.keys(t);if(a.length!==c.length)return!1;for(var n=0,r=a;n<r.length;n++){var s=r[n];if(e[s]!==t[s])return!1}return!0}(O.values,i)||r,type:"submit",variant:"contained",disableElevation:!0,children:r?"Loading...":"Save Changes"})})]})})},oe=a(165),le=a(22),je=["customer","className"],be=Object(r.a)((function(){return{root:{}}}));var de=function(e){var t=e.customer,a=e.className,c=Object(g.a)(e,je),n=be(),r=Object(le.b)(),s=Object(le.c)((function(e){return e.customers})).isUpdating;return Object(p.jsxs)(h.a,Object(v.a)(Object(v.a)({className:Object(y.a)(n.root,a),container:!0,spacing:3},c),{},{children:[Object(p.jsx)(h.a,{item:!0,md:4,xl:3,xs:12,children:Object(p.jsxs)(h.a,{container:!0,spacing:3,children:[Object(p.jsx)(h.a,{item:!0,xs:12,children:Object(p.jsx)(F,{customer:t})}),Object(p.jsx)(h.a,{item:!0,xs:12,children:Object(p.jsx)(X,{})})]})}),Object(p.jsx)(h.a,{item:!0,md:8,xl:9,xs:12,children:Object(p.jsx)(ie,{user:t,handleUpdate:function(e,t){r(Object(oe.e)(e,t))},isUpdating:s})})]}))},he=a(405),Oe=a(7),ue=a(372),me=a(130),xe=a(477),pe=a(965),fe=a(56),ve=a.n(fe),ge=a(413),ye=["className","jobs"],_e=Object(r.a)((function(e){return{hoverIcon:{color:e.palette.text.secondary,"&:hover":{color:e.palette.primary.main}}}})),Ne=Object(Oe.a)((function(e){return{head:{backgroundColor:e.palette.background.level2,color:e.palette.text.secondary},body:{fontSize:14}}}))(D.a);var Ce=function(e){e.className;var t=e.jobs,a=(Object(g.a)(e,ye),_e());return Object(p.jsx)("div",{children:Object(p.jsxs)(_.a,{children:[Object(p.jsx)(N.a,{title:"Customer jobs"}),Object(p.jsx)(j.a,{}),Object(p.jsx)(he.a,{children:Object(p.jsx)(s.a,{minWidth:1300,children:Object(p.jsxs)(S.a,{children:[Object(p.jsx)(ue.a,{children:Object(p.jsxs)(k.a,{children:[Object(p.jsx)(Ne,{children:"#"}),Object(p.jsx)(Ne,{children:"Status"}),Object(p.jsx)(Ne,{children:"Service"}),Object(p.jsx)(Ne,{children:"Date"}),Object(p.jsx)(Ne,{children:"Size"}),Object(p.jsx)(Ne,{children:"Crew"}),Object(p.jsx)(Ne,{children:"Created at"}),Object(p.jsx)(Ne,{align:"right",children:"Actions"})]})}),Object(p.jsx)(P.a,{children:t.map((function(e){return Object(p.jsxs)(k.a,{hover:!0,children:[Object(p.jsx)(D.a,{children:Object(p.jsx)(m.a,{variant:"subtitle2",color:"textPrimary",component:d.b,underline:"none",to:"/dashboard/jobs/".concat(e.id),children:e.id})}),Object(p.jsxs)(D.a,{children:[" ",Object(p.jsx)(ge.a,{status:e.job_status})]}),Object(p.jsx)(D.a,{children:e.job_type}),Object(p.jsx)(D.a,{children:ve()(e.pick_up_date).format("MMM DD, YYYY")}),Object(p.jsx)(D.a,{children:e.job_size}),Object(p.jsx)(D.a,{children:e.crew_size}),Object(p.jsxs)(D.a,{variant:"footer",children:[" ",ve()(e.created_at).format("MM/DD/YYYY")]}),Object(p.jsx)(D.a,{align:"right",children:Object(p.jsx)(w.a,{component:d.b,to:"/dashboard/jobs/".concat(e.id),classes:{root:a.hoverIcon},children:Object(p.jsx)(me.a,{fontSize:"small",children:Object(p.jsx)(pe.a,{})})})})]},e.id)}))})]})})}),Object(p.jsx)(xe.a,{component:"div",count:t.length,onPageChange:function(){},onRowsPerPageChange:function(){},page:0,rowsPerPage:5,rowsPerPageOptions:[5,10,25]})]})})},we=Object(r.a)((function(e){return{root:{}}}));t.default=function(e){var t=e.match,a=we(),r=Object(le.c)((function(e){return e.customers})),d=r.customer,h=r.customerJobs,O=Object(le.b)(),u=Object(n.useState)("details"),m=Object(c.a)(u,2),x=m[0],v=m[1],g=t.params.id,y=[{value:"details",label:"Details"},{value:"jobs",label:"Jobs (".concat(null===h||void 0===h?void 0:h.length,")")}];return Object(n.useEffect)((function(){return O(Object(oe.b)(g)),function(){O(Object(oe.a)())}}),[O,g]),d?Object(p.jsx)(b.a,{className:a.root,title:"Customer Details",children:Object(p.jsx)(s.a,{sx:{backgroundColor:"background.default",minHeight:"100%",paddingY:8},children:Object(p.jsxs)(i.a,{maxWidth:!1,children:[Object(p.jsx)(f,{customer:d}),Object(p.jsx)(s.a,{mt:3,children:Object(p.jsx)(o.a,{onChange:function(e,t){v(t)},scrollButtons:"auto",value:x,variant:"scrollable",textColor:"primary",indicatorColor:"primary",children:y.map((function(e){return Object(p.jsx)(l.a,{label:e.label,value:e.value},e.value)}))})}),Object(p.jsx)(j.a,{}),Object(p.jsxs)(s.a,{mt:3,children:["details"===x&&Object(p.jsx)(de,{customer:d}),"jobs"===x&&Object(p.jsx)(Ce,{jobs:h})]})]})})}):null}}}]);