(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[17],{973:function(e,t,a){"use strict";a.r(t);var n=a(16),r=a.n(n),i=a(30),c=a(39),o=a(5),l=a(0),s=a(19),d=a.n(s),u=a(57),p=a(629),m=a(525),b=a(631),j=a(632),h=a(633),f=a(634),x=(a(635),a(636),a(637),a(638),a(221)),g=a(393),v=a(42),O=a(305),y=a(367),w=a(346),D=a(355),k=a(219),C=a(20),M=a(7),N=a(350),Y=a(10),P=a(345),_=a(967),I=a(349),S=a(62),T=a(302),E=a(639),z=a.n(E),A=a(640),B=a.n(A),R=a(58),W=a.n(R),H=a(1),L=["date","onDateNext","onDatePrev","onDateToday","onViewChange","view"],G=[{icon:z.a,label:"Month",value:"dayGridMonth"},{icon:B.a,label:"Week",value:"timeGridWeek"}],V=function(e){var t=e.date,a=e.onDateNext,n=e.onDatePrev,r=e.onDateToday,i=e.onViewChange,c=e.view,l=Object(Y.a)(e,L);return Object(H.jsxs)(P.a,Object(o.a)(Object(o.a)({alignItems:"center",container:!0,justifyContent:"space-between",spacing:3},l),{},{children:[Object(H.jsx)(P.a,{item:!0,children:Object(H.jsxs)(_.a,{size:"small",children:[Object(H.jsx)(I.a,{onClick:n,children:"Prev"}),Object(H.jsx)(I.a,{onClick:r,children:"Today"}),Object(H.jsx)(I.a,{onClick:a,children:"Next"})]})}),Object(H.jsx)(P.a,{item:!0,children:Object(H.jsx)(S.a,{color:"textPrimary",variant:"h5",children:W()(t).format("MMMM YYYY")})}),Object(H.jsx)(P.a,{item:!0,children:Object(H.jsx)(O.a,{sx:{color:"text.primary"},children:G.map((function(e){var t=e.icon;return Object(H.jsx)(g.a,{title:e.label,children:Object(H.jsx)(T.a,{color:e.value===c?"primary":"inherit",onClick:function(){return t=e.value,void(i&&i(t));var t},children:Object(H.jsx)(t,{fontSize:"small"})})},e.value)}))})})]}))},F=a(24),q=a(25),J=function(){function e(){Object(F.a)(this,e),this.CONTAINER_ID=null,this.initialized=!1}return Object(q.a)(e,[{key:"configure",value:function(e){this.CONTAINER_ID=e.containerId}},{key:"initialize",value:function(e){if(!this.initialized&&document&&e.containerId){this.configure(e);var t=document.createElement("script"),a=document.createElement("noscript");t.innerHTML="\n      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n      })(window,document,'script','dataLayer','".concat(this.CONTAINER_ID,"');\n    "),a.innerHTML='\n      <iframe src="https://www.googletagmanager.com/ns.html?id='.concat(this.CONTAINER_ID,'" height="0" width="0" style="display:none;visibility:hidden"></iframe>\n    '),document.head.insertBefore(t,document.head.childNodes[0]),document.body.insertBefore(a,document.body.childNodes[0])}}},{key:"push",value:function(){var e;window&&(window.dataLayer||(window.dataLayer=[]),(e=window.dataLayer).push.apply(e,arguments))}}]),e}(),U=new J,K=a(163),Q=a(115),X=a(22),Z=a(641),$=a(744),ee=a.n($),te=a(614),ae=a(63),ne=a(366),re=a(362),ie=a(383),ce=a(365),oe=a(385),le=[{name:"Classic Manicure",time:20,price:30,category:"manicure",details:"Classic Manicure details goes gere"},{name:"Nail Extension",time:50,price:60,category:"manicure",details:"Nail Extension details goes gere"},{name:"Deluxe Manicure",time:30,price:40,category:"manicure",details:"Deluxe Manicure details goes gere"},{name:"Mani-Pedi",time:40,price:60,category:"pedicure",details:"Mani-Pedi details goes gere"},{name:"Classic Pedicure",time:20,price:15,category:"pedicure",details:"Classic Pedicure details goes gere"},{name:"Medical Pedi",time:45,price:50,category:"pedicure",details:"Medical Pedi details goes gere"},{name:"Gel Polish Removal",time:15,price:10,category:"gel-polish",details:"Gel Polish Removal details goes gere"},{name:"Gel Polish Manicure",time:45,price:50,category:"gel-polish",details:"Gel Polish Manicure details goes gere"},{name:"Custom Design",time:60,price:80,category:"nail-art",details:"Custom Design details goes gere"}],se=a(847),de=a.n(se),ue=a(146),pe=a(91),me=a(116),be=a(14),je=a.n(be)()(Object(H.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(H.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Trash"),he=a(173),fe=Object(x.a)((function(e){return{infoBox:{display:"flex",flexDirection:"column",justifyContent:"center"},header:{padding:e.spacing(1,2)},closeButton:{padding:e.spacing(1)},label:{fontWeight:600,marginBottom:e.spacing(1),display:"flex",color:e.palette.text.secondary,alignItems:"baseline"},icon:{marginRight:6,top:6,width:20,position:"relative",color:e.palette.text.secondary},phoneButton:{marginTop:e.spacing(2)},iconColor:{color:e.palette.text.secondary}}})),xe=function(e,t){return e?ee()({},{allDay:!1,color:"",description:"",end:Object(Z.addMinutes)(new Date,30),start:new Date,title:"",submit:null},e):t?ee()({},{allDay:!1,color:"",description:"",end:new Date(t.end),start:new Date(t.start),title:"",submit:null},e):{allDay:!1,color:"",description:"",end:Object(Z.addMinutes)(new Date,30),start:new Date,title:"",submit:null}},ge=function(e){var t=fe(),a=e.event,n=e.onAddComplete,c=e.onCancel,o=e.onDeleteComplete,l=e.onEditComplete,s=e.range,d=Object(X.b)(),u=Object(X.c)((function(e){return e.auth})).user,p=Object(Q.b)().enqueueSnackbar,m=function(){var e=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d(Object(K.d)(a.id));case 3:o&&o(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),b=function(e){return le.filter((function(t){return t.name===e}))[0].price},j=!a;return Object(H.jsx)(ae.a,{initialValues:xe(a,s),validationSchema:te.a().shape({title:te.c().max(255).required("Title is required")}),onSubmit:function(){var e=Object(i.a)(r.a.mark((function e(t,i){var c,o,s,u,m;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=i.resetForm,o=i.setErrors,s=i.setStatus,u=i.setSubmitting,e.prev=1,m={start:t.start,title:t.title},!a){e.next=8;break}return e.next=6,d(Object(K.i)(a.id,m));case 6:e.next=10;break;case 8:return e.next=10,d(Object(K.c)(m));case 10:c(),s({success:!0}),u(!1),p("Calendar updated",{anchorOrigin:{horizontal:"right",vertical:"top"},variant:"success"}),j&&n&&n(),!j&&l&&l(),e.next=24;break;case 18:e.prev=18,e.t0=e.catch(1),console.error(e.t0),s({success:!1}),o({submit:e.t0.message}),u(!1);case 24:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t,a){return e.apply(this,arguments)}}(),children:function(e){var n,r=e.handleChange,i=e.handleSubmit,o=e.isSubmitting,l=e.values;return Object(H.jsxs)("form",{onSubmit:i,children:[Object(H.jsxs)(O.a,{display:"flex",alignItems:"center",className:t.header,children:[c?Object(H.jsx)(T.a,{"aria-label":"close",onClick:c,className:t.closeButton,children:Object(H.jsx)(he.a,{})}):null,Object(H.jsx)(S.a,{variant:"h6",style:{flex:1,textAlign:"center"},children:j?"Add Appointment":"Edit Appointment"})]}),Object(H.jsx)(ne.a,{}),Object(H.jsxs)(O.a,{p:2,children:[Object(H.jsx)("label",{htmlFor:"title",className:t.label,children:"Service"}),Object(H.jsx)(re.a,{style:{minWidth:120},variant:"outlined",fullWidth:!0,children:Object(H.jsx)(ie.a,{value:l.title,name:"title",id:"title",onChange:r,displayEmpty:!0,renderValue:function(e){return 0===e.length?Object(H.jsx)("em",{children:"Select service"}):e},children:le.map((function(e,t){return Object(H.jsx)(ce.a,{value:e.name,children:e.name},t)}))})})]}),l.title&&Object(H.jsxs)(P.a,{container:!0,style:{padding:"0px 24px"},children:[Object(H.jsx)(P.a,{item:!0,xs:4,md:3,children:Object(H.jsxs)(S.a,{variant:"subtitle1",color:"textPrimary",gutterBottom:!0,style:{display:"flex"},children:[Object(H.jsx)(O.a,{mr:1}),(n=l.title,le.filter((function(e){return e.name===n}))[0].time)," min"]})}),Object(H.jsx)(P.a,{item:!0,xs:4,md:3,children:Object(H.jsxs)(S.a,{variant:"subtitle1",color:"textPrimary",gutterBottom:!0,style:{display:"flex",justifyContent:"center"},children:[Object(H.jsx)(de.a,{className:t.iconColor}),b(l.title)]})})]}),Object(H.jsxs)(O.a,{pl:3,pr:3,pt:2,children:[Object(H.jsx)("label",{htmlFor:"start",className:t.label,children:"Date / time"}),Object(H.jsx)(oe.a,{fullWidth:!0,variant:"outlined",id:"start",type:"datetime-local",onChange:r,name:"start",value:l.start,className:t.textField,InputLabelProps:{shrink:!0}})]}),!j&&Object(H.jsxs)(O.a,{p:3,children:[Object(H.jsxs)(O.a,{className:t.infoBox,children:[Object(H.jsxs)(S.a,{variant:"h6",color:"textPrimary",children:[Object(H.jsx)(ue.a,{className:t.icon}),a.customer.first_name+" "+a.customer.last_name]}),Object(H.jsxs)(S.a,{variant:"body2",color:"textSecondary",component:"a",href:"mailto:".concat(a.customer.email),children:[Object(H.jsx)(pe.a,{className:t.icon}),a.customer.email]}),Object(H.jsx)(P.a,{item:!0,xs:12,md:6,children:Object(H.jsx)(I.a,{className:t.phoneButton,variant:"outlined",color:"primary",href:"tel:".concat(a.customer.phone),disableElevation:!0,fullWidth:!0,startIcon:Object(H.jsx)(me.a,{}),children:a.customer.phone})})]}),u.admin?Object(H.jsxs)(O.a,{className:t.infoBox,mt:3,children:[Object(H.jsx)(S.a,{variant:"subtitle2",color:"textSecondary",children:"Technician"}),Object(H.jsx)(S.a,{children:a.user.first_name+" "+a.user.last_name})]}):null]}),Object(H.jsx)(ne.a,{}),Object(H.jsxs)(O.a,{style:{alignItems:"center",display:"flex",padding:16},children:[!j&&Object(H.jsx)(T.a,{onClick:function(){return m()},children:Object(H.jsx)(je,{fontSize:"small",className:t.iconColor})}),Object(H.jsx)(O.a,{style:{flexGrow:1}}),Object(H.jsx)(I.a,{color:"primary",disableElevation:!0,disabled:o,style:{marginLeft:8},type:"submit",variant:"contained",children:"Update"})]})]})}})},ve=a(119),Oe=function(e){var t=e.calendar,a=t.events,n=t.selectedEventId;return n?a.find((function(e){return e.id===parseInt(n)})):null},ye=Object(k.a)("div")((function(e){var t=e.theme;return{"& .fc-license-message":{display:"none"},"& .fc":{"--fc-bg-event-opacity":1,"--fc-border-color":t.palette.divider,"--fc-daygrid-event-dot-width":"10px","--fc-event-text-color":t.palette.text.primary,"--fc-list-event-hover-bg-color":t.palette.background.level2,"--fc-neutral-bg-color":t.palette.background.default,"--fc-page-bg-color":t.palette.background.default,"--fc-today-bg-color":Object(C.a)(t.palette.primary.main,.25),color:t.palette.text.primary,fontFamily:t.typography.fontFamily},"& .fc .fc-col-header-cell-cushion":{paddingBottom:"10px",paddingTop:"10px"},"& .fc .fc-day-other .fc-daygrid-day-top":{color:t.palette.text.secondary},"& .fc-daygrid-event":{padding:"10px"},"& .fc-day-header":Object(o.a)(Object(o.a)({},t.typography.subtitle2),{},{fontWeight:t.typography.fontWeightMedium,color:t.palette.text.secondary,padding:t.spacing(1),backgroundColor:t.palette.background.level2}),"& .fc-right":{display:"flex"},"& .fc-unthemed td.fc-today":{backgroundColor:t.palette.background.level2},"& .fc-unthemed .fc-divider, .fc-unthemed .fc-popover .fc-header, .fc-unthemed .fc-list-heading td":{backgroundColor:t.palette.background.level2},"& .fc-unthemed .fc-list-empty":{backgroundColor:t.palette.background.level2},"& .fc-event":{fontSize:10,lineHeight:1.2,border:"none",backgroundColor:"transparent",color:"#000","&:hover":{color:"#000"}},"& .fc-day-number":{float:"left !important"}}})),we=Object(x.a)((function(e){return{hoverName:{fontWeight:600,"&:hover":{textDecoration:"underline"}},rateBox:{display:"flex",justifyContent:"flex-end",alignItems:"center",position:"relative",top:4,marginRight:4,fontSize:8,color:e.palette.text.secondary}}}));function De(e,t){if(!e)return null;for(var a=0;a<e.length;a++)if(e[a].date===t)return e[a].rates}var ke=Object(M.a)((function(e){return{tooltip:{backgroundColor:"#f5f5f7",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,border:"1px solid #dadde9"}}}))(g.a);t.default=function(e){var t=we(),a=Object(X.b)(),n=Object(v.a)(),s=Object(l.useRef)(null),x=Object(N.a)((function(e){return e.breakpoints.down("sm")})),g=Object(X.c)((function(e){return e.calendar})),k=g.events,C=g.isModalOpen,M=g.selectedRange,Y=Object(Q.b)().enqueueSnackbar,P=Object(X.c)((function(e){return e.rates})).rates,_=Object(X.c)(Oe),I=Object(l.useState)(new Date),S=Object(c.a)(I,2),T=S[0],E=S[1],z=Object(l.useState)(x?"listWeek":"dayGridMonth"),A=Object(c.a)(z,2),B=A[0],R=A[1];Object(l.useEffect)((function(){U.push({event:"page_view"})}),[]),Object(l.useEffect)((function(){a(Object(K.f)()),a(Object(ve.a)())}),[a]);var L=[];null===k||void 0===k||k.map((function(e){var t=W()(e.pick_up_date).format("MM/DD/YYYY"),a=De(P,t),n=e.customer.first_name+" "+e.customer.last_name[0]+".";return L.push(Object(o.a)(Object(o.a)({},e),{},{title:n,start:e.pick_up_date,rendering:a})),null}));var G=function(){var e=Object(i.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.event,e.prev=1,e.next=4,a(Object(K.i)(n.id,{start:W()(n.start).format("YYYY-MM-DDTHH:mm:ss"),end:W()(n.end).format("YYYY-MM-DDTHH:mm:ss")}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(i.a)(r.a.mark((function e(t){var n,i,c,o,l,s,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.event,i=W()(n.start).format("MM/DD/YYYY"),c=n.extendedProps.crew_size,o=n.extendedProps.estimated_time,l=De(P,i),s=parseInt(l[c-2]),d=o.map((function(e,t){return e*s})),console.log(d),e.prev=8,e.next=11,a(Object(K.i)(n.id,{pick_up_date:W()(n.start).format("YYYY-MM-DDTHH:mm:ss"),end:W()(n.start).format("YYYY-MM-DDTHH:mm:ss"),job_rate:s,estimated_quote:"{".concat(d,"}")}));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(8),console.error(e.t0);case 16:Y("Job updated",{anchorOrigin:{horizontal:"right",vertical:"top"},variant:"success"});case 17:case"end":return e.stop()}}),e,null,[[8,13]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){a(Object(K.b)())};return Object(H.jsx)(u.a,{title:"Calendar",style:{minWidth:1400},children:Object(H.jsx)(O.a,{sx:{backgroundColor:"background.default",minHeight:"100%",paddingY:8},children:Object(H.jsxs)(y.a,{maxWidth:!1,children:[Object(H.jsx)(O.a,{mt:3,children:Object(H.jsx)(V,{date:T,onDateNext:function(){var e=s.current;if(e){var t=e.getApi();t.next(),E(t.getDate())}},onDatePrev:function(){var e=s.current;if(e){var t=e.getApi();t.prev(),E(t.getDate())}},onDateToday:function(){var e=s.current;if(e){var t=e.getApi();t.today(),E(t.getDate())}},onViewChange:function(e){var t=s.current;t&&(t.getApi().changeView(e),R(e))},view:B})}),Object(H.jsx)(w.a,{style:{marginTop:24,padding:16,boxShadow:n.shadows[1]},children:Object(H.jsx)(ye,{children:Object(H.jsx)(p.a,{allDayMaintainDuration:!0,dayMaxEventRows:3,droppable:!0,dayRender:function(e){var a=e.date,n=e.el,r=(e.view,W()(a).format("MM/DD/YYYY")),i=De(P,r);if(!i)return null;var c="transparent";"120"===i[0]&&(c="rgb(0 186 93 / 25%)"),"160"===i[0]&&(c="rgba(253 201 9 / 25%)"),"200"===i[0]&&(c="rgba(251 0 9 / 25%)");var o={backgroundColor:c,padding:"0px 2px"},l=Object(H.jsx)(O.a,{className:t.rateBox,children:Object(H.jsxs)(O.a,{style:o,children:[i[0],"/",i[1],"/",i[2]]})});return d.a.render(l,n),n},editable:!0,eventClick:function(t){e.history.push("/dashboard/jobs/".concat(t.event.id))},eventDisplay:"block",eventDrop:F,eventResizableFromStart:!0,eventResize:G,events:L,eventRender:function(e){var a=e.event,r=e.el,i=a.extendedProps.job_type,c=a.extendedProps.job_status,o=k.filter((function(e){return e.customer.id===a.extendedProps.customer.id})).length,l=a.extendedProps.crew_size,s=a.extendedProps.estimated_time,u=W()(a.extendedProps.pick_up_date).format("hA"),p="",m=n.palette.primary.main;"Completed"===c?m=n.palette.success.main:"Needs Attention"===c?m=n.palette.warning.main:"Canceled"===c&&(m=n.palette.error.main),"Unloading Help"===i?p="U":"Loading Help"===i?p="L":"Inside Move"===i?p="I":"Moving with Storage"===i?p="\u2192 ]":"Packing Only"===i&&(p="P");var b=Object(H.jsxs)(O.a,{display:"flex",alignItems:"center",className:"fc-title",children:[Object(H.jsx)(O.a,{style:{width:35},children:u}),Object(H.jsx)(O.a,{style:{color:"".concat(m)},className:t.hoverName,children:a.title}),o>1?Object(H.jsx)("span",{style:{fontSize:8,position:"relative",fontWeight:600,bottom:5,color:"#00F"},children:o}):null,Object(H.jsx)(O.a,{flexGrow:1}),Object(H.jsx)(O.a,{style:{marginRight:"5px",display:"flex"},children:"P"===p?Object(H.jsx)("img",{src:"https://freeiconshop.com/wp-content/uploads/edd/box-outline-filled.png",alt:"box",style:{width:10}}):p}),Object(H.jsx)(ke,{title:Object(H.jsxs)(O.a,{children:[Object(H.jsx)("p",{children:a.extendedProps.job_size}),Object(H.jsxs)("b",{children:[s[0],s[1]?" - "+s[1]:null," hr"]})]}),placement:"top-start",children:Object(H.jsxs)(O.a,{children:[l,"/",Math.floor(s[0])]})})]});return d.a.render(b,r),r},header:!1,headerToolbar:!0,height:800,initialDate:T,plugins:[m.d,b.a,j.a,h.a,f.a],ref:s,rerenderDelay:10,select:function(e){var t=s.current;t&&t.getApi().unselect();a(Object(K.h)(e.start,e.end))},weekends:!0})})}),Object(H.jsx)(D.a,{fullWidth:!0,maxWidth:"xs",onClose:q,open:C,children:C&&Object(H.jsx)(ge,{event:_,onAddComplete:q,onCancel:q,onDeleteComplete:q,onEditComplete:q,range:M})})]})})})}}}]);