(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[14],{1043:function(e,t,a){"use strict";a.r(t);var n=a(39),i=a(0),r=a.n(i),o=a(308),c=a(310),s=a(374),l=a(350),d=a(373),j=a(62),b=a(58),u=a(5),m=a(26),h=a(163),p=a(392),x=a(385),O=a(355),f=a(361),g=a(375),v=a(363),y=a(1041),_=a(364),w=a(75),S=a(170),M=a(480),C=a(164),z=a(22),k=(a(201),a(1));function N(e){return Object(k.jsx)(h.a,Object(u.a)({},e))}var T=function(e){var t=e.job,a=e.history,r=Object(i.useState)(!1),o=Object(n.a)(r,2),s=o[0],d=o[1],b=Object(z.b)(),u=function(){d(!1)};return Object(k.jsxs)(l.a,{container:!0,justifyContent:"space-between",spacing:3,children:[Object(k.jsxs)(l.a,{item:!0,children:[Object(k.jsxs)(j.a,{color:"textPrimary",variant:"h5",children:["Request ID: ",t.id]}),Object(k.jsxs)(p.a,{"aria-label":"breadcrumb",separator:Object(k.jsx)(w.a,{fontSize:"small"}),style:{marginTop:8},children:[Object(k.jsx)(x.a,{color:"textPrimary",component:m.b,to:"/dashboard",variant:"subtitle2",children:"Dashboard"}),Object(k.jsx)(x.a,{color:"textPrimary",component:m.b,to:"/dashboard/jobs",variant:"subtitle2",children:"Jobs"}),Object(k.jsx)(j.a,{color:"textSecondary",variant:"subtitle2",children:t.id})]})]}),Object(k.jsx)(l.a,{item:!0,children:Object(k.jsxs)(c.a,{m:-1,children:[Object(k.jsx)(O.a,{color:"primary",disableElevation:!0,startIcon:Object(k.jsx)(S.a,{fontSize:"small"}),style:{margin:8},variant:"contained",children:"Edit"}),Object(k.jsx)(O.a,{color:"secondary",disableElevation:!0,onClick:function(){d(!0)},startIcon:Object(k.jsx)(M.a,{fontSize:"small"}),style:{margin:8},variant:"contained",children:"Delete job"}),Object(k.jsxs)(f.a,{open:s,onClose:u,PaperComponent:N,"aria-labelledby":"draggable-dialog-title",children:[Object(k.jsx)(g.a,{id:"draggable-dialog-title",children:"Delete"}),Object(k.jsx)(v.a,{children:Object(k.jsx)(y.a,{children:"Are you sure you want to delete this job?"})}),Object(k.jsxs)(_.a,{children:[Object(k.jsx)(O.a,{autoFocus:!0,onClick:u,size:"small",variant:"outlined",children:"No"}),Object(k.jsx)(O.a,{color:"secondary",disableElevation:!0,onClick:function(){b(Object(C.e)(t.id)),a.push("/dashboard/jobs")},startIcon:Object(k.jsx)(M.a,{fontSize:"small"}),style:{margin:8},variant:"contained",size:"small",children:"Yes!"})]})]})]})})]})},I=a(13),B=a.n(I),D=a(29),W=a(10),A=a(3),Y=a(351),R=a(384),H=a(353),E=a(380),F=a(382),U=a(378),q=a(377),P=a(397),L=a(391),V=a(307),G=a(116),J=a(115),$=a(91),K=a(421),Z=a(63),Q=a(228),X=a(369),ee=a(389),te=a(1054),ae=a(372),ne=a(370),ie=a(226),re=a(196),oe=a(444),ce=a(443),se=Object(ie.a)((function(e){return{label:{fontWeight:600,marginBottom:e.spacing(1),display:"inline-block",color:e.palette.text.secondary},icon:{marginRight:e.spacing(1),top:6,width:20,position:"relative"},buttonsContainer:{marginTop:e.spacing(5),marginBottom:e.spacing(2),justifyContent:"space-between"}}})),le=function(e){var t=e.setStatus,a=e.handleStatusUpdate,n=e.handleClose,i=e.users,r=e.init,o=se(),c=[];i.map((function(e){return c.push(e),null}));var s=Object(Z.b)({initialValues:r,validateOnMount:!0,enableReinitialize:!1,validate:function(e){return function(e){var t={};return""===e.job_duration&&(t.job_duration="Required"),""===e.total_amount&&(t.total_amount="Required"),e.user_ids.length<2&&(t.user_ids="Min 2 movers"),t}(e)},onSubmit:function(e){t("Completed"),a(e),n()}});return Object(k.jsx)(Q.a,{in:!0,mountOnEnter:!0,unmountOnExit:!0,children:Object(k.jsxs)("form",{onSubmit:s.handleSubmit,children:[Object(k.jsxs)(l.a,{container:!0,spacing:2,children:[Object(k.jsxs)(l.a,{item:!0,xs:6,md:6,children:[Object(k.jsxs)("label",{htmlFor:"job_duration",className:o.label,children:[Object(k.jsx)(re.a,{className:o.icon}),"Job Duration"]}),Object(k.jsx)(L.a,{fullWidth:!0,id:"job_duration",name:"job_duration",variant:"outlined",size:"small",placeholder:"Duration",inputProps:{maxLength:5},value:s.values.job_duration||"",onChange:function(e){s.handleChange(e)},error:s.touched.job_duration&&Boolean(s.errors.job_duration),helperText:s.touched.job_duration&&s.errors.job_duration})]}),Object(k.jsxs)(l.a,{item:!0,xs:6,md:6,children:[Object(k.jsxs)("label",{htmlFor:"total_amount",className:o.label,children:[Object(k.jsx)(oe.a,{className:o.icon}),"Total Amount"]}),Object(k.jsx)(L.a,{fullWidth:!0,id:"total_amount",name:"total_amount",variant:"outlined",size:"small",placeholder:"Amount",inputProps:{maxLength:6,inputMode:"numeric"},value:s.values.total_amount||"",onChange:function(e){s.handleChange(e)},error:s.touched.total_amount&&Boolean(s.errors.total_amount),helperText:s.touched.total_amount&&s.errors.total_amount})]}),Object(k.jsxs)(l.a,{item:!0,xs:12,children:[Object(k.jsxs)("label",{htmlFor:"user_ids",className:o.label,children:[Object(k.jsx)(ce.a,{className:o.icon}),"Crew"]}),Object(k.jsxs)(X.a,{variant:"outlined",size:"small",placeholder:"Select",fullWidth:!0,error:s.touched.user_ids&&Boolean(s.errors.user_ids),children:[Object(k.jsx)(ee.a,{id:"user_ids",variant:"outlined",placeholder:"Select",name:"user_ids",size:"small",multiple:!0,renderValue:function(e){return Object(k.jsx)("div",{className:o.chips,children:e.map((function(e,t){return Object(k.jsx)(te.a,{label:e.first_name+" "+e.last_name,className:o.chip},t)}))})},value:s.values.user_ids,onChange:s.handleChange,error:s.touched.user_ids&&Boolean(s.errors.user_ids),children:c.map((function(e,t){return Object(k.jsx)(ae.a,{value:e,children:e.first_name+" "+e.last_name},t)}))}),s.touched.user_ids&&Boolean(s.errors.user_ids)?Object(k.jsx)(ne.a,{children:s.errors.user_ids}):null]})]})]}),Object(k.jsx)(l.a,{container:!0,spacing:2,classes:{root:o.buttonsContainer},children:Object(k.jsx)(l.a,{item:!0,xs:12,children:Object(k.jsx)(O.a,{color:"primary",variant:"contained",fullWidth:!0,type:"submit",disableElevation:!0,children:"Save and Update"})})})]})})},de=a(178),je=["customer","job","className","users","init"],be=Object(o.a)((function(e){return{root:{},content:{padding:0,"& .MuiTableCell-root":{borderBottom:"none"}},name:{fontWeight:"bold",marginBottom:e.spacing(2),"&:hover":{textDecoration:"none"}},infoField:{display:"flex",flexDirection:"column",alignItems:"center"},button:{color:e.palette.text.secondary,"&:hover":{color:e.palette.primary.main}},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.text.secondary}}})),ue=["Needs Attention","Confirmed","Canceled","Completed"];function me(e){return Object(k.jsx)(h.a,Object(u.a)({},e))}var he=function(e){var t=e.customer,a=e.job,r=e.className,o=e.users,s=e.init,l=Object(W.a)(e,je),b=be(),h=Object(i.useState)(a.job_status),p=Object(n.a)(h,2),x=p[0],y=p[1],_=Object(G.b)().enqueueSnackbar,w=Object(z.b)(),S=Object(i.useState)(!1),M=Object(n.a)(S,2),N=M[0],T=M[1],I=function(){T(!1)},Z=function(){var e=Object(D.a)(B.a.mark((function e(t){var n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],t.user_ids&&(t.user_ids.map((function(e){return n.push(e.id),null})),t.user_ids=n),e.prev=2,e.next=5,w(Object(C.k)(a.id,Object(u.a)({},t)));case 5:_("Status Changed",{variant:"success",anchorOrigin:{horizontal:"right",vertical:"top"}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)(Y.a,Object(u.a)(Object(u.a)({},l),{},{className:Object(A.a)(b.root,r),children:[Object(k.jsx)(R.a,{style:{textAlign:"center"},title:Object(k.jsx)(K.a,{status:a.job_status})}),Object(k.jsx)(d.a,{}),Object(k.jsxs)(H.a,{className:b.content,children:[Object(k.jsx)(E.a,{children:Object(k.jsx)(F.a,{style:{display:"flex",flexDirection:"column"},children:Object(k.jsx)(U.a,{children:Object(k.jsxs)(q.a,{className:b.infoField,children:[Object(k.jsx)(P.a,{style:{height:"60px",width:"60px",marginBottom:8}}),Object(k.jsxs)(j.a,{component:m.b,color:"textPrimary",to:"/dashboard/customers/".concat(t.id),className:b.name,children:[t.first_name," ",t.last_name]}),Object(k.jsx)(O.a,{color:"default",component:"a",href:"tel:".concat(t.phone),className:b.button,fullWidth:!0,startIcon:Object(k.jsx)(J.a,{}),children:t.phone}),t.add_phone?Object(k.jsx)(O.a,{color:"default",component:"a",href:"tel:".concat(t.add_phone),className:b.button,fullWidth:!0,startIcon:Object(k.jsx)(J.a,{}),children:t.add_phone}):null,Object(k.jsx)(O.a,{color:"default",component:"a",href:"mailto:".concat(t.email),className:b.button,fullWidth:!0,startIcon:Object(k.jsx)($.a,{}),children:t.email})]})})})}),Object(k.jsxs)(c.a,{justifyContent:"space-between",display:"flex",flexDirection:"column",alignItems:"center",minHeight:"100px",children:[Object(k.jsx)(j.a,{variant:"caption",children:"Change Status"}),Object(k.jsx)(L.a,{name:"option",onChange:function(e){e.preventDefault(),e.currentTarget.blur(),"Completed"===e.target.value?T(!0):y(e.target.value)},select:!0,SelectProps:{native:!0},value:x,variant:"outlined",size:"small",children:ue.map((function(e){return Object(k.jsx)("option",{value:e,children:e},e)}))}),Object(k.jsx)(O.a,{variant:"contained",size:"small",disableElevation:!0,color:"primary",onClick:function(){return Z({job_status:x})},disabled:a.job_status===x,children:"Update"})]})]}),Object(k.jsxs)(f.a,{open:N,onClose:I,PaperComponent:me,"aria-labelledby":"draggable-dialog-title",children:[Object(k.jsx)(g.a,{id:"form-dialog-title",classes:{root:b.dialogTitle},children:Object(k.jsx)(V.a,{"aria-label":"close",className:b.closeButton,onClick:function(){return I()},children:Object(k.jsx)(de.a,{})})}),Object(k.jsx)(v.a,{children:Object(k.jsx)(le,{onClose:I,handleStatusUpdate:Z,setStatus:y,handleClose:I,init:s,users:o})})]})]}))},pe=a(48),xe=a.n(pe),Oe=a(197),fe=a(878),ge=a(534),ve=a(627),ye=a.n(ve),_e=a(357),we=a(304),Se=a(643),Me=a(358),Ce=a(15),ze=a.n(Ce),ke=ze()(Object(k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(k.jsx)("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),"Upload"),Ne=a(986),Te=Object(ie.a)((function(e){return{root:{marginTop:e.spacing(4),width:"100%"},input:{display:"none"}}})),Ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var a=1024,n=t<0?0:t,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(e)/Math.log(a));return"".concat(parseFloat((e/Math.pow(a,r)).toFixed(n))," ").concat(i[r])};function Be(e){var t=e.jobId,a=e.dispatch,r=Te(),o=Object(i.useState)([]),c=Object(n.a)(o,2),s=c[0],l=c[1];function d(){return(d=Object(D.a)(B.a.mark((function e(t){var a,n,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files[0],n={maxSizeMB:.4,maxWidthOrHeight:800,useWebWorker:!0},e.prev=2,e.next=5,Object(Ne.a)(a,n);case 5:i=e.sent,Object.assign(i,{path:a.path}),l(i),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}var j=function(){var e=Object(D.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(Object(C.a)(t,s));case 2:l([]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)("div",{className:r.root,children:[Object(k.jsx)("input",{accept:"image/*",className:r.input,id:"contained-button-file",multiple:!0,type:"file",onChange:function(e){return d.apply(this,arguments)}}),Object(k.jsx)("label",{htmlFor:"contained-button-file",children:Object(k.jsx)(O.a,{variant:"outlined",color:"primary",component:"span",disableElevation:!0,fullWidth:!0,startIcon:Object(k.jsx)(ke,{}),children:"Add photo to inventory"})}),s.name&&Object(k.jsx)("div",{children:Object(k.jsxs)(_e.a,{className:r.list,children:[Object(k.jsxs)(we.a,{disableGutters:!0,children:[Object(k.jsx)(Se.a,{children:Object(k.jsx)(ye.a,{})}),Object(k.jsx)(Me.a,{primary:s.name,secondary:Ie(s.size)})]}),Object(k.jsx)(we.a,{disableGutters:!0,children:Object(k.jsxs)("div",{className:r.actions,children:[Object(k.jsx)(O.a,{size:"small",onClick:function(){l([])},children:"Remove"}),Object(k.jsx)(O.a,{color:"secondary",size:"small",variant:"contained",disableElevation:!0,onClick:j,children:"Upload"})]})})]})})]})}var De=a(987),We=a.n(De);var Ae=function(e){var t=e.images,a=e.dispatch,r=Object(i.useState)(0),o=Object(n.a)(r,2),s=o[0],l=o[1],d=[];t.map((function(e){return d.push({src:e.photo.url,thumbnailWidth:3,thumbnailHeight:4,thumbnail:e.photo.url,id:e.id,nano:"https://www.urbansplash.co.uk/images/placeholder-1-1.jpg"}),null}));var j=0!==d.length?d[d.length-1].id:0;return d.map((function(e){return s===d.indexOf(e)&&(j=e.id),null})),Object(k.jsx)(c.a,{mt:1,children:Object(k.jsx)(We.a,{images:d,enableLightbox:!0,enableImageSelection:!1,rowHeight:40,currentImageWillChange:function(e){l(e)},backdropClosesModal:!0,thumbnailStyle:function(){return{cursor:"pointer",width:"100%",height:"100%",marginTop:0,objectFit:"cover",objectPosition:"center","&:hover":{opacity:.5}}},customControls:[Object(k.jsx)(O.a,{color:"secondary",size:"small",startIcon:Object(k.jsx)(M.a,{}),onClick:function(){return a(Object(C.f)(j))},disableElevation:!0,children:"Delete"},"deleteImage")]})})},Ye=a(16),Re=Object(ie.a)((function(e){return{dialogRoot:Object(Ye.a)({padding:e.spacing(3)},e.breakpoints.down("md"),{margin:e.spacing(1)}),editIcon:{color:e.palette.primary.main,"& svg":{width:16,height:16}}}}));function He(e){var t=e.children,a=Re(),i=r.a.useState(!1),o=Object(n.a)(i,2),c=o[0],s=o[1];return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(V.a,{"aria-label":"edit",classes:{root:a.editIcon},onClick:function(){s(!0)},children:Object(k.jsx)(S.a,{})}),Object(k.jsx)(f.a,{open:c,onClose:function(){s(!1)},"aria-labelledby":"form-dialog-title",classes:{paper:a.dialogRoot},children:t})]})}a(154);var Ee=a(121),Fe=Object(ie.a)((function(e){return{root:{},label:{fontWeight:600,marginBottom:e.spacing(1),display:"inline-block",color:e.palette.text.secondary},icon:{marginRight:e.spacing(1),top:6,width:20,position:"relative"}}})),Ue=[{key:"6",text:"Moving",value:"Moving"},{key:"1",text:"Moving with Storage",value:"Moving with Storage"},{key:"2",text:"Loading Help",value:"Loading Help"},{key:"3",text:"Unloading Help",value:"Unloading Help"},{key:"4",text:"Packing Only",value:"Packing Only"},{key:"5",text:"Inside Move",value:"Inside Move"}],qe=function(e){var t=Object.assign({},e),a=Fe();return Object(k.jsx)(l.a,{container:!0,spacing:2,children:Object(k.jsxs)(l.a,{item:!0,xs:12,children:[Object(k.jsxs)("label",{htmlFor:"movingService",className:a.label,children:[Object(k.jsx)(Ee.a,{className:a.icon}),"Service"]}),Object(k.jsx)(X.a,{variant:"outlined",size:"small",placeholder:"Select",fullWidth:!0,children:Object(k.jsx)(ee.a,Object(u.a)(Object(u.a)({id:"movingService",variant:"outlined",name:"movingService",size:"small"},t),{},{children:Ue.map((function(e){return Object(k.jsx)(ae.a,{value:e.value,children:e.text},e.key)}))}))})]})})},Pe=a(177),Le=Object(ie.a)((function(e){return{root:{},label:{fontWeight:600,marginBottom:e.spacing(1),display:"inline-block",color:e.palette.text.secondary},icon:{marginRight:e.spacing(1),top:6,width:20,position:"relative"}}})),Ve=[{key:"moveSize",text:"Please select...",value:""},{key:"room",text:"One Room or less (<1000 lbs)",value:"Room or less (partial move)"},{key:"studio",text:"Studio apartment",value:"Studio apartment"},{key:"onebed",text:"1 Bedroom apartment",value:"1 Bedroom apartment"},{key:"twobed",text:"2 Bedroom apartment",value:"2 Bedroom apartment"},{key:"threebed",text:"3+ Bedroom apartment",value:"3+ Bedroom apartment"},{key:"twohouse",text:"2 Bedroom House/Townhouse",value:"2 Bedroom House/Townhouse"},{key:"threehouse",text:"3 Bedroom House/Townhouse",value:"3 Bedroom House/Townhouse"},{key:"fourhouse",text:"4+ Bedroom House/Townhouse",value:"4+ Bedroom House/Townhouse"},{key:"commercial",text:"Office / Commercial space",value:"Office / Commercial space"}],Ge=function(e){var t=Object.assign({},e),a=Le();return Object(k.jsx)(l.a,{container:!0,spacing:2,children:Object(k.jsxs)(l.a,{item:!0,xs:12,children:[Object(k.jsxs)("label",{htmlFor:"movingService",className:a.label,children:[Object(k.jsx)(Pe.a,{className:a.icon}),"Move Size"]}),Object(k.jsx)(X.a,{variant:"outlined",size:"small",placeholder:"Select",fullWidth:!0,children:Object(k.jsx)(ee.a,Object(u.a)(Object(u.a)({id:"movingService",variant:"outlined",name:"movingService",size:"small"},t),{},{children:Ve.map((function(e,t){return Object(k.jsx)(ae.a,{value:e.value,disabled:""===e.value,children:e.text},t)}))}))})]})})},Je=Object(ie.a)((function(e){return{root:{},label:{fontWeight:600,marginBottom:e.spacing(1),display:"inline-block",color:e.palette.text.secondary},icon:{marginRight:e.spacing(1),top:6,width:20,position:"relative"}}})),$e=[{key:"crewSize",text:"Please select...",value:""},{key:"2",text:"2 movers",value:2},{key:"3",text:"3 movers",value:3},{key:"4",text:"4 movers",value:4}],Ke=function(e){var t=Object.assign({},e),a=Je();return Object(k.jsx)(l.a,{container:!0,spacing:2,children:Object(k.jsxs)(l.a,{item:!0,xs:12,children:[Object(k.jsxs)("label",{htmlFor:"crewSize",className:a.label,children:[Object(k.jsx)(ce.a,{className:a.icon}),"Crew size"]}),Object(k.jsx)(X.a,{variant:"outlined",size:"small",placeholder:"Select",fullWidth:!0,children:Object(k.jsx)(ee.a,Object(u.a)(Object(u.a)({id:"crewSize",variant:"outlined",name:"crewSize",size:"small"},t),{},{children:$e.map((function(e,t){return Object(k.jsx)(ae.a,{value:e.value,disabled:""===e.value,children:e.text},t)}))}))})]})})},Ze=a(96),Qe=a(159),Xe=a(195),et=Object(ie.a)((function(e){return{root:{},label:{fontWeight:600,marginBottom:e.spacing(1),display:"inline-block",color:e.palette.text.secondary},icon:{marginRight:e.spacing(1),top:6,width:20,position:"relative"}}}));var tt=function(e){var t=e.job,a=e.formState,n=e.setFormState,i=et(),r=function(e){var t=function(e){var t=Xe.a.find((function(t){return t.z===e}));return void 0===t?null:t}(null===e?"":e.target.value);if(console.log(t),t){var i=t.c,r=t.s;n(Object(u.a)(Object(u.a)({},a),{},{origin:Object(u.a)(Object(u.a)({},a.origin),{},{city:i,state:r})}))}};return Object(k.jsxs)(l.a,{container:!0,spacing:2,children:[Object(k.jsxs)(l.a,{item:!0,xs:8,children:[Object(k.jsxs)("label",{htmlFor:"address",className:i.label,children:[Object(k.jsx)(Ze.a,{className:i.icon}),"Address"]}),Object(k.jsx)(L.a,{fullWidth:!0,id:"address",name:"address",variant:"outlined",size:"small",placeholder:"123 Street Name",value:a.origin?a.origin.address:t.origin.address,onChange:function(e){var t;n(Object(u.a)(Object(u.a)({},a),{},{origin:Object(u.a)(Object(u.a)({},a.origin),{},{address:(t=e.target.value,t.toLowerCase().split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.substring(1)})).join(" "))})}))}})]}),Object(k.jsxs)(l.a,{item:!0,xs:4,children:[Object(k.jsxs)("label",{htmlFor:"fromApt",className:i.label,children:[Object(k.jsx)(Qe.a,{className:i.icon}),"Apt"]}),Object(k.jsx)(L.a,{fullWidth:!0,id:"fromApt",name:"fromApt",variant:"outlined",size:"small",placeholder:"Apt",value:a.origin?a.origin.apt_number:t.origin.apt_number,onChange:function(e){n(Object(u.a)(Object(u.a)({},a),{},{origin:Object(u.a)(Object(u.a)({},a.origin),{},{apt_number:e.target.value})}))}})]}),Object(k.jsxs)(l.a,{item:!0,xs:4,md:4,children:[Object(k.jsxs)("label",{htmlFor:"city",className:i.label,children:[Object(k.jsx)(Ze.a,{className:i.icon}),"City"]}),Object(k.jsx)(L.a,{fullWidth:!0,id:"city",name:"city",variant:"outlined",size:"small",placeholder:"City",disabled:!0,value:a.origin?a.origin.city:t.origin.city})]}),Object(k.jsxs)(l.a,{item:!0,xs:4,md:4,children:[Object(k.jsxs)("label",{htmlFor:"state",className:i.label,children:[Object(k.jsx)(Ze.a,{className:i.icon}),"State"]}),Object(k.jsx)(L.a,{fullWidth:!0,id:"state",name:"state",variant:"outlined",size:"small",placeholder:"State",disabled:!0,value:a.origin?a.origin.state:t.origin.state})]}),Object(k.jsxs)(l.a,{item:!0,xs:4,md:4,children:[Object(k.jsxs)("label",{htmlFor:"zip",className:i.label,children:[Object(k.jsx)(Ze.a,{className:i.icon}),"Zip"]}),Object(k.jsx)(L.a,{fullWidth:!0,id:"zip",name:"zip",variant:"outlined",size:"small",placeholder:"ZIP Code",onInput:function(e){return function(e){e.target.value=e.target.value.replace(/[^0-9]/g,"")}(e)},inputProps:{maxLength:5,inputMode:"numeric"},value:a.origin?a.origin.zip:t.origin.zip,onBlur:function(e){r(e)},onChange:function(e){n(Object(u.a)(Object(u.a)({},a),{},{origin:Object(u.a)(Object(u.a)({},a.origin),{},{zip:e.target.value})}))}})]})]})},at=["job","dispatch","setFormState","formState","recalc","setRecalc","saveAndUpdate","setSaveAndUpdate"],nt=Object(o.a)((function(e){return{root:{},content:{padding:0,"& .MuiTableCell-root":{borderBottom:"none"}},headerDistance:{textAlign:"center",paddingBottom:e.spacing(1)},addInfoContainer:{display:"flex",flexDirection:"column",padding:"0px 15px"},addInfoTitle:{fontSize:"14px",color:e.palette.primary.main,textTransform:"uppercase",fontWeight:600},addInfoSubTitle:{backgroundColor:e.palette.background.level2,padding:"15px",wordWrap:"break-word",display:"flex",flexDirection:"column"},paragraph:{fontStyle:"italic",fontSize:12},margTop:{marginTop:6},crewNames:{color:e.palette.text.secondary},editIcon:{color:e.palette.primary.main}}}));var it=function(e){var t=e.job,a=e.dispatch,r=e.setFormState,o=e.formState,s=(e.recalc,e.setRecalc),l=(e.saveAndUpdate,e.setSaveAndUpdate),b=Object(W.a)(e,at),m=nt(),h=Object(Oe.a)({googleMapsApiKey:"AIzaSyADEDKabHN5FBcOroOU1W7BzUam0Az8gGQ"}).isLoaded,p=Object(i.useState)(null),x=Object(n.a)(p,2),O=x[0],f=x[1],g=window.google=window.google?window.google:{},v=Object(i.useState)(null),y=Object(n.a)(v,2),_=y[0],w=y[1],S=Object(z.c)((function(e){return e.rates})).rates,M=function(e,t){for(var a=xe()(e).format("MM/DD/YYYY"),n=0;n<t.length;n++){var i=t[n].date;if(i&&i===a)return t[n].rates}};function C(e){var t=parseFloat(e),a=t-parseInt(t,10);return 5===(a=Math.round(10*a))?parseInt(t,10)+.5:a<3||a>7?Math.round(t):parseInt(t,10)+.5}var N=function(e){var t=o.estimated_time,a=o.crew_size-e;return Math.sign(a)<0&&(1===Math.abs(a)?t=t.map((function(e){return C(e-.2*e)})):2===Math.abs(a)&&(t=t.map((function(e){return C(e-.4*e)})))),Math.sign(a)>0&&(1===Math.abs(a)?t=t.map((function(e){return C(e+.2*e)})):2===Math.abs(a)&&(t=t.map((function(e){return C(e+.4*e)})))),t};Object(i.useEffect)((function(){return t.id&&w(T()),function(){w(null)}}),[t.id]);var T=function(){var e=t.origin.address+","+t.origin.city+","+t.origin.zip,a="";a=""===t.destination.address?t.origin.address+","+t.origin.city+","+t.origin.zip:t.destination.address+","+t.destination.city+","+t.destination.zip;var n=[];n=t.origin.add_address?[{location:t.origin.add_address}]:null;var i=Object(ge.compose)(Object(ge.withProps)({loadingElement:Object(k.jsx)("div",{style:{height:"100%"}}),containerElement:Object(k.jsx)("div",{style:{height:"30vh",width:"97%",margin:"auto"}}),mapElement:Object(k.jsx)("div",{style:{height:"100%"}})}),fe.withGoogleMap,Object(ge.lifecycle)({componentDidMount:function(){var t=this;(new g.maps.DirectionsService).route({origin:e,destination:a,waypoints:n,travelMode:g.maps.TravelMode.DRIVING},(function(e,a){a===g.maps.DirectionsStatus.OK&&(t.setState({directions:e}),f(e.routes[0].legs[0].distance.text))}))}}))((function(e){return Object(k.jsx)(fe.GoogleMap,{defaultZoom:12,defaultCenter:new g.maps.LatLng(42.36,-71.06),defaultOptions:{mapTypeControl:!1,streetViewControl:!1,panControl:!1,scaleControl:!1,fullscreenControl:!1,scrollwheel:!1,styles:[{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#c4e5ff"}]},{featureType:"transit",stylers:[{color:"#808080"},{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{visibility:"on"},{color:"#b3b3b3"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#ffffff"},{weight:1.8}]},{featureType:"road.local",elementType:"geometry.stroke",stylers:[{color:"#d7d7d7"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#ebebeb"}]},{featureType:"administrative",elementType:"geometry",stylers:[{color:"#a7a7a7"}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"landscape",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#efefef"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#696969"}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{visibility:"on"},{color:"#737373"}]},{featureType:"poi",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"geometry.stroke",stylers:[{color:"#d6d6d6"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{},{featureType:"poi",elementType:"geometry.fill",stylers:[{color:"#dadada"}]}]},children:e.directions&&Object(k.jsx)(fe.DirectionsRenderer,{directions:e.directions})})}));return Object(k.jsx)(i,{google:g})};return Object(k.jsxs)(Y.a,Object(u.a)(Object(u.a)({},b),{},{className:m.root,children:[Object(k.jsx)(R.a,{title:"Move Overview"}),h&&_,Object(k.jsxs)(H.a,{className:m.content,children:[Object(k.jsx)(c.a,{className:m.headerDistance,children:O}),Object(k.jsx)(d.a,{}),Object(k.jsx)(E.a,{children:Object(k.jsxs)(F.a,{children:[Object(k.jsxs)(U.a,{children:[Object(k.jsx)(q.a,{children:"Move date:"}),Object(k.jsxs)(q.a,{style:{display:"flex",flexDirection:"column",fontWeight:700},children:[xe()(t.pick_up_date).format("dddd, MMMM DD, YYYY"),"Moving with Storage"===t.job_type&&Object(k.jsxs)(j.a,{variant:"caption",color:"textSecondary",children:["*storage till"," ",xe()(t.delivery_date).format("MMMM DD, YYYY")]})]}),Object(k.jsx)(q.a,{children:Object(k.jsx)(He,{})})]}),Object(k.jsxs)(U.a,{children:[Object(k.jsx)(q.a,{children:"Start time:"}),Object(k.jsx)(q.a,{style:{fontWeight:700},children:xe()(t.pick_up_date).format("h A")})]}),"Moving from Storage"===t.job_type?Object(k.jsxs)(U.a,{children:[Object(k.jsx)(q.a,{children:t.destination.address?"Moving from:":"Address:"}),Object(k.jsxs)(q.a,{style:{display:"flex",flexDirection:"column"},children:[Object(k.jsx)(j.a,{style:{fontWeight:600},variant:"body2",children:"Insight Moving Storage"}),Object(k.jsx)(j.a,{variant:"caption",color:"textSecondary",children:"*unit #0000"})]})]}):Object(k.jsxs)(U.a,{children:[Object(k.jsx)(q.a,{children:t.destination.address?"Moving from:":"Address:"}),Object(k.jsxs)(q.a,{style:{display:"flex",flexDirection:"column"},children:[t.origin.address,",",Object(k.jsxs)(j.a,{style:{fontWeight:600},variant:"body2",children:[t.origin.city,", ",t.origin.state,", ",t.origin.zip]}),t.origin.apt_number&&Object(k.jsxs)(j.a,{variant:"caption",color:"textSecondary",children:["Apt #",t.origin.apt_number]}),Object(k.jsxs)(j.a,{variant:"caption",color:"textSecondary",children:["*",t.origin.floor?t.origin.floor:t.destination.floor]})]}),Object(k.jsx)(q.a,{children:Object(k.jsx)(He,{children:Object(k.jsx)(tt,{job:t,formState:o,setFormState:r})})})]}),"Moving with Storage"===t.job_type&&Object(k.jsxs)(U.a,{children:[Object(k.jsx)(q.a,{children:"Storage:"}),Object(k.jsxs)(q.a,{style:{display:"flex",flexDirection:"column"},children:[Object(k.jsx)(j.a,{style:{fontWeight:600},variant:"body2",children:"Insight Moving Storage"}),Object(k.jsxs)(j.a,{variant:"caption",color:"textSecondary",children:["*",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"YYYY-MM-DD",n=function(e){return xe()(e.split(/\D+/),a)};return n(t).diff(n(e),"days")}(t.pick_up_date,t.delivery_date)," days"]})]})]}),t.destination.address?Object(k.jsxs)(U.a,{children:[Object(k.jsx)(q.a,{children:"Moving to:"}),Object(k.jsxs)(q.a,{style:{display:"flex",flexDirection:"column"},children:[t.destination.address,",",Object(k.jsxs)(j.a,{style:{fontWeight:600},variant:"body2",children:[t.destination.city,", ",t.destination.state,","," ",t.destination.zip]}),t.destination.apt_number&&Object(k.jsxs)(j.a,{variant:"caption",color:"textSecondary",children:["Apt #",t.destination.apt_number]}),Object(k.jsxs)(j.a,{variant:"caption",color:"textSecondary",children:["*",t.destination.floor]})]}),Object(k.jsx)(q.a,{children:Object(k.jsx)(He,{})})]}):null,Object(k.jsxs)(U.a,{children:[Object(k.jsx)(q.a,{style:{padding:"0px"},children:Object(k.jsx)(d.a,{})}),Object(k.jsx)(q.a,{style:{padding:"0px"},children:Object(k.jsx)(d.a,{})}),Object(k.jsx)(q.a,{style:{padding:"0px"},children:Object(k.jsx)(d.a,{})})]}),Object(k.jsxs)(U.a,{children:[Object(k.jsx)(q.a,{children:"Service:"}),Object(k.jsx)(q.a,{children:t.job_type}),Object(k.jsx)(q.a,{children:Object(k.jsx)(He,{children:Object(k.jsx)(qe,{value:o.job_type,onChange:function(e){r(Object(u.a)(Object(u.a)({},o),{},{job_type:e.target.value}))}})})})]}),Object(k.jsxs)(U.a,{children:[Object(k.jsx)(q.a,{children:"Move size:"}),Object(k.jsx)(q.a,{style:{fontWeight:700},children:t.job_size}),Object(k.jsx)(q.a,{children:Object(k.jsx)(He,{children:Object(k.jsx)(Ge,{value:o.job_size,onChange:function(e){s(!1),l(!0),r(Object(u.a)(Object(u.a)({},o),{},{job_size:e.target.value}))}})})})]}),Object(k.jsxs)(U.a,{children:[Object(k.jsx)(q.a,{style:{padding:"0px"},children:Object(k.jsx)(d.a,{})}),Object(k.jsx)(q.a,{style:{padding:"0px"},children:Object(k.jsx)(d.a,{})}),Object(k.jsx)(q.a,{style:{padding:"0px"},children:Object(k.jsx)(d.a,{})})]}),Object(k.jsxs)(U.a,{children:[Object(k.jsx)(q.a,{children:"Crew:"}),Object(k.jsxs)(q.a,{style:{fontWeight:700},children:[t.crew_size," movers"]}),Object(k.jsx)(q.a,{children:Object(k.jsx)(He,{children:Object(k.jsx)(Ke,{value:o.crew_size,onChange:function(e){s(!0);var t,a,n=o.pick_up_date;r(Object(u.a)(Object(u.a)({},o),{},{crew_size:e.target.value,job_rate:parseInt(M(n,S)[e.target.value-2]),estimated_time:N(e.target.value),estimated_quote:(t=parseInt(M(n,S)[e.target.value-2]),a=N(e.target.value),[t*a[0],t*a[1]])}))}})})})]}),!t.is_flat_rate&&Object(k.jsxs)(U.a,{children:[Object(k.jsx)(q.a,{children:"Hourly rate:"}),Object(k.jsx)(q.a,{children:Object(k.jsxs)(j.a,{variant:"body1",color:"primary",style:{fontWeight:700},children:["$",t.job_rate,"/hr"]})})]}),"Completed"===t.job_status?Object(k.jsxs)(U.a,{children:[Object(k.jsx)(q.a,{children:"Duration:"}),Object(k.jsx)(q.a,{children:Object(k.jsxs)(j.a,{variant:"body1",color:"secondary",style:{fontWeight:700},children:[t.job_duration||""," hours"]})})]}):!t.is_flat_rate&&Object(k.jsxs)(U.a,{children:[Object(k.jsx)(q.a,{children:"Estimated time:"}),Object(k.jsx)(q.a,{children:Object(k.jsxs)(j.a,{variant:"body1",color:"secondary",style:{fontWeight:700},children:[t.estimated_time[0]," - ",t.estimated_time[1]," hours*"]})})]}),"Completed"===t.job_status||t.is_flat_rate?null:Object(k.jsxs)(U.a,{children:[Object(k.jsx)(q.a,{children:"Travel time:"}),Object(k.jsx)(q.a,{children:Object(k.jsxs)("label",{children:[t.travel_time[0],"/",t.travel_time[1]," min* (from/to HQ)"]})})]}),"Completed"===t.job_status?Object(k.jsxs)(U.a,{children:[Object(k.jsx)(q.a,{children:"Total:"}),Object(k.jsx)(q.a,{style:{fontWeight:600,fontSize:"18px"},children:Object(k.jsxs)("label",{children:["$",t.total_amount]})})]}):Object(k.jsxs)(U.a,{children:[Object(k.jsx)(q.a,{children:t.is_flat_rate?"FLAT PRICE":"Estimated quote:"}),Object(k.jsx)(q.a,{style:{fontWeight:600,fontSize:"18px"},children:t.is_flat_rate?Object(k.jsxs)("label",{children:["$",t.estimated_quote[0]]}):Object(k.jsxs)("label",{children:["$",t.estimated_quote[0]," - $",t.estimated_quote[1]," "]})})]}),"Completed"===t.job_status&&Object(k.jsxs)(U.a,{children:[Object(k.jsx)(q.a,{children:"Crew:"}),Object(k.jsx)(q.a,{children:t.users.map((function(e,a){return Object(k.jsxs)("label",{className:m.crewNames,children:[e.first_name+" "+e.last_name,a===t.users.length-1?null:", "]},a)}))})]})]})}),Object(k.jsx)(d.a,{}),"Completed"===t.job_status?null:Object(k.jsxs)(c.a,{mt:2,className:m.addInfoContainer,children:[Object(k.jsxs)(j.a,{variant:"body2",className:m.paragraph,children:[Object(k.jsx)("span",{style:{color:"red",fontWeight:500,marginRight:"8px"},children:"NOTE:"}),Object(k.jsx)("span",{style:{fontWeight:700},children:"This quote is just an estimate and provided for your convinience only."}),"\xa0We give you a database average for generally similar moves. However, your final cost is based on hourly rate and actual time your move will take. Additional time may be required if your move involves long walks, narrow stares, furniture disassembly, bad weather conditions, etc."]}),Object(k.jsx)(j.a,{variant:"body2",className:m.paragraph,children:"* Total moving time consist of 2 hours minimum labour time plus fixed travel time."}),Object(k.jsx)(j.a,{variant:"body2",className:Object(A.a)(m.paragraph,m.margTop),children:"We accept cash, checks, credit cards. If you choose to pay with a credit cardor debit card, you will be charged a fee of 3% of the payment amount."})]}),Object(k.jsx)(c.a,{mt:4,className:m.addInfoContainer,children:Object(k.jsx)(c.a,{children:Object(k.jsx)(j.a,{className:m.addInfoTitle,children:"Additional Information:"})})}),Object(k.jsxs)(c.a,{className:m.addInfoContainer,children:[Object(k.jsxs)(c.a,{mt:2,className:m.addInfoSubTitle,children:[Object(k.jsx)(j.a,{variant:"body2",color:"textPrimary",children:t.additional_info}),t.images.length>0&&Object(k.jsx)(d.a,{}),Object(k.jsx)(Ae,{images:t.images,dispatch:a}),Object(k.jsx)(Be,{jobId:t.id,dispatch:a})]}),"Completed"===t.job_status?null:Object(k.jsx)(j.a,{variant:"body2",style:{fontSize:12},className:m.margTop,children:"Long distance moves are FLAT RATE and REQUIRED the list of all furniture and approximate amount of boxes."})]})]})]}))},rt=a(113),ot=a(225),ct=a(1034),st=a.n(ct),lt=a(1033),dt=a.n(lt),jt=a(168),bt=a(118),ut=ze()(Object(k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(k.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),"DocumentText"),mt=["customer","event","history"],ht=Object(ie.a)((function(e){return{root:{},actionIcon:{marginRight:e.spacing(1)},cardHeader:{textAlign:"center"},button:{display:"flex",width:"100%",justifyContent:"flex-start",color:e.palette.text.secondary},arrow:{marginLeft:"auto",color:e.palette.text.secondary},menuBox:{flexDirection:"column",width:"100%"},menuBoxActive:{backgroundColor:e.palette.background.level2},statusBox:{display:"flex",alignItems:"center",marginTop:"-5px",padding:0,"& span ":{fontSize:10,backgroundColor:"transparent",fontWeight:400,padding:0}},topInfo:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",flex:1}}}));var pt=function(e){var t=e.customer,a=e.event,r=e.history,o=Object(W.a)(e,mt),s=Object(z.b)(),l=ht(),b=Object(i.useRef)(null),m=Object(i.useState)(!1),h=Object(n.a)(m,2),p=h[0],x=h[1],f=Object(z.c)((function(e){return e.customers})).customerJobs;return Object(i.useEffect)((function(){s(Object(jt.b)(t.id))}),[s,t.id]),f?Object(k.jsxs)(Y.a,Object(u.a)(Object(u.a)({className:Object(A.a)(l.root)},o),{},{children:[Object(k.jsx)(R.a,{title:"Helpful links"}),Object(k.jsx)(d.a,{}),Object(k.jsx)(H.a,{children:Object(k.jsxs)(c.a,{display:"flex",flexDirection:"column",alignItems:"flex-start",children:[Object(k.jsxs)(O.a,{className:l.button,component:rt.a,onClick:function(){x(!0)},ref:b,children:[Object(k.jsx)(dt.a,{className:l.actionIcon}),"My Moves History (",Object(k.jsx)("span",{style:{fontWeight:600},children:f.length}),")",Object(k.jsx)(w.a,{className:Object(A.a)(l.actionIcon,l.arrow)})]}),Object(k.jsx)(ot.a,{onClose:function(){x(!1)},anchorOrigin:{vertical:"bottom",horizontal:"center"},keepMounted:!0,getContentAnchorEl:null,anchorEl:b.current,open:p,PaperProps:{style:{maxHeight:288},className:l.popover},children:f.map((function(e,t){var n,i,o;return Object(k.jsx)(ae.a,{open:p,className:e.id===a.id?l.menuBoxActive:null,onClick:function(t){e.id!==a.id?r.push("/dashboard/jobs/".concat(e.id)):t.preventDefault()},children:Object(k.jsxs)(c.a,{display:"flex",className:l.menuBox,children:[Object(k.jsxs)(c.a,{className:l.topInfo,children:[Object(k.jsx)(c.a,{children:Object(k.jsx)(j.a,{variant:"body2",color:"textSecondary",children:xe()(e.pick_up_date).format("MM/DD/YYYY")})}),Object(k.jsxs)(c.a,{className:l.topInfo,ml:1,children:[e.origin&&Object(k.jsx)(c.a,{children:Object(k.jsx)(j.a,{variant:"body2",children:"Moving with Storage"===e.job_type?"IM Storage":e.origin.city+","+e.origin.state})}),(null===(n=e.destination)||void 0===n?void 0:n.city)&&Object(k.jsx)(bt.a,{style:{width:14,margin:"0 8px"},className:Object(A.a)(l.actionIcon,l.arrow)}),e.destination&&e.destination.address&&Object(k.jsx)(c.a,{children:Object(k.jsx)(j.a,{variant:"body2",children:"Moving from Storage"===e.job_type?"IM Storage":(null===(i=e.destination)||void 0===i?void 0:i.city)+","+(null===(o=e.destination)||void 0===o?void 0:o.state)})})]})]}),Object(k.jsx)(c.a,{className:l.statusBox,children:Object(k.jsxs)(j.a,{children:[Object(k.jsx)(K.a,{status:e.job_status}),e.job_duration?Object(k.jsxs)(j.a,{variant:"caption",color:"textSecondary",style:{marginLeft:4},children:[e.job_duration,"hr"]}):null]})}),Object(k.jsx)(d.a,{})]})},t)}))}),Object(k.jsxs)(O.a,{className:l.button,children:[Object(k.jsx)(st.a,{className:l.actionIcon}),"Certificate of Insurance",Object(k.jsx)(w.a,{className:Object(A.a)(l.actionIcon,l.arrow)})]}),Object(k.jsxs)(O.a,{className:l.button,disabled:!a.receipt,children:[Object(k.jsx)(ut,{className:l.actionIcon}),"Moving Receipt",Object(k.jsx)(w.a,{className:Object(A.a)(l.actionIcon,l.arrow)})]}),Object(k.jsxs)(O.a,{className:l.button,children:[Object(k.jsx)(ye.a,{className:l.actionIcon}),"Bill of Lading",Object(k.jsx)(w.a,{className:Object(A.a)(l.actionIcon,l.arrow)})]})]})})]})):null},xt=a(167),Ot=a(354),ft={"Room or less (partial move)":30,"Studio apartment":100,"1 Bedroom apartment":120,"2 Bedroom apartment":180,"2 Bedroom House/Townhouse":240,"3+ Bedroom apartment":360,"3 Bedroom House/Townhouse":420,"4+ Bedroom House/Townhouse":520,"Office / Commercial space":300},gt=function(e){return{"elevator building":Math.round(.2*ft[e]),"private house":Math.round(.1*ft[e]),"storage unit":Math.round(.2*ft[e]),"1st/Ground floor":Math.round(.1*ft[e]),"2nd floor":Math.round(.2*ft[e]),"3rd floor":Math.round(.3*ft[e]),"4th floor":Math.round(.4*ft[e])}},vt=["elevator building","private house","storage unit","1st/Ground floor","2nd floor","3rd floor","4th floor"],yt=["Room or less (partial move)","Studio apartment","1 Bedroom apartment","2 Bedroom apartment","2 Bedroom House/Townhouse","3+ Bedroom apartment","3 Bedroom House/Townhouse","4+ Bedroom House/Townhouse","Office / Commercial space"],_t=Object(ie.a)((function(e){return{root:{display:"flex",flexDirection:"column"}}}));var wt=function(e){var t=e.formState,a=e.event,n=e.dispatch,i=e.setFormState,r=e.rates,o=e.recalc,c=e.setRecalc,s=e.saveAndUpdate,l=e.setSaveAndUpdate,b=_t(),m=function(e,t,a){for(var n=2,i=0;i<yt.length;i++)if(yt[i]===e)for(var r=0;r<vt.length;r++)if(vt[r]===t)for(var o=0;o<vt.length;o++)if(vt[o]===a)return i>6?n+3:i>=4?n+2:i>2?r>4&&o>4?n+2:n+1:i>=1?r>4||o>4?n+1:n:0===i&&(6===r||6===o)?n+1:n;return n},h=function(e){return Math.round(2*e)/2},p=function(e){return"Inside Move"===e};function x(e){var t=parseFloat(e),a=t-parseInt(t,10);return 5===(a=Math.round(10*a))?parseInt(t,10)+.5:a<3||a>7?Math.round(t):parseInt(t,10)+.5}var f=function(){var e=t.job_type,n=t.job_size,i=t.origin.floor,r=t.destination.floor,o=t.travel_time.reduce((function(e,t){return e+t}));p(e)&&(o=2*t.travel_time[0]);var c=ft[n];"Loading Help"===e&&(c=.75*ft[n]),(function(e){return"Unloading Help"===e}(e)||function(e){return"Packing Only"===e}(e))&&(c=.5*ft[n]),p(e)&&(c=.4*ft[n]),function(e){return"Moving with Storage"===e}(e)&&(c=.8*ft[n]);var s=0,l=t.crew_size-a.crew_size;s=""===i?c+gt(n)[r]+o:""===r?c+gt(n)[i]+o:c+gt(n)[i]+gt(n)[r]+o,Math.sign(l)<0&&(1===Math.abs(l)?s=x(s+.2*s):2===Math.abs(l)&&(s=x(s+.35*s))),Math.sign(l)>0&&(1===Math.abs(l)?s=x(s-.2*s):2===Math.abs(l)&&(s=x(s-.35*s)));var d=h(s/60),j=[];return j="Moving"===e||"Moving with Storage"===e?[h(d),h(d+1)]:[h(d),h(d+.5)],d<2&&(j=[2]),j};function g(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var a=0;a<e.length;++a)if(e[a]!==t[a])return!1;return!0}var v=function(e){for(var t=xe()(e).format("MM/DD/YYYY"),a=0;a<r.length;a++){var n=r[a].date;if(n&&n===t)return r[a].rates}};return Object(k.jsxs)(Y.a,{children:[Object(k.jsx)(R.a,{title:"Changes made"}),Object(k.jsx)(d.a,{}),Object(k.jsxs)(H.a,{classes:{root:b.root},children:[t.pick_up_date&&xe()(t.pick_up_date).format("MM/DD/YYYY")!==xe()(a.pick_up_date).format("MM/DD/YYYY")?Object(k.jsxs)(j.a,{variant:"caption",children:["Move date changed from"," ",Object(k.jsx)("b",{children:xe()(a.pick_up_date).format("MMM DD, YYYY")})," to"," ",Object(k.jsx)("b",{children:xe()(t.pick_up_date).format("MMM DD, YYYY")})]}):null,t.origin&&t.origin!==a.origin?Object(k.jsxs)(j.a,{variant:"caption",children:["Origin changed from"," ",Object(k.jsxs)("b",{children:[a.origin.address,", ",a.origin.city]})," ","to"," ",Object(k.jsxs)("b",{children:[t.origin.address,", ",t.origin.city]})]}):null,t.job_type&&a.job_type!==t.job_type?Object(k.jsxs)(j.a,{variant:"caption",children:["Moving Service changed from ",Object(k.jsx)("b",{children:a.job_type})," to"," ",Object(k.jsx)("b",{children:t.job_type})]}):null,t.job_size&&a.job_size!==t.job_size?Object(k.jsxs)(j.a,{variant:"caption",children:["Move Size changed from ",Object(k.jsx)("b",{children:a.job_size})," to"," ",Object(k.jsx)("b",{children:t.job_size})]}):null,t.crew_size&&a.crew_size!==t.crew_size?Object(k.jsxs)(j.a,{variant:"caption",children:["Crew Size changed from ",Object(k.jsx)("b",{children:a.crew_size})," to"," ",Object(k.jsx)("b",{children:t.crew_size})]}):null,t.job_rate&&a.job_rate!==parseInt(t.job_rate)?Object(k.jsxs)(j.a,{variant:"caption",children:["Rate changed from ",Object(k.jsx)("b",{children:a.job_rate})," to"," ",Object(k.jsx)("b",{children:t.job_rate})]}):null,t.estimated_time&&!g(t.estimated_time,a.estimated_time)?Object(k.jsxs)(j.a,{variant:"caption",children:["Est. time changed from"," ",Object(k.jsxs)("b",{children:[a.estimated_time[0]," - ",a.estimated_time[1]]})," ","to"," ",Object(k.jsxs)("b",{children:[t.estimated_time[0]," - ",t.estimated_time[1]]})]}):null,t.estimated_quote&&!g(t.estimated_quote,a.estimated_quote)?Object(k.jsxs)(j.a,{variant:"caption",children:["Est. quote changed from"," ",Object(k.jsxs)("b",{children:[a.estimated_quote[0]," - ",a.estimated_quote[1]]})," ","to"," ",Object(k.jsxs)("b",{children:[t.estimated_quote[0]," - ",t.estimated_quote[1]]})]}):null]}),Object(k.jsxs)(Ot.a,{children:[Object(k.jsx)(O.a,{size:"small",color:"primary",onClick:function(){return i(a)},children:"Cancel"}),Object(k.jsx)(O.a,{size:"small",color:"primary",variant:"contained",disableElevation:!0,onClick:function(){n(Object(C.k)(a.id,Object(u.a)(Object(u.a)({},t),{},{estimated_time:"{".concat(t.estimated_time[0],",").concat(t.estimated_time[1],"}"),estimated_quote:"{".concat(t.estimated_quote[0],",").concat(t.estimated_quote[1],"}")})))},disabled:s,children:"Save and Update"}),Object(k.jsx)(O.a,{size:"small",color:"primary",variant:"contained",disableElevation:!0,disabled:o,onClick:function(){l(!1),c(!0),i(Object(u.a)(Object(u.a)({},t),{},{crew_size:t.crew_size===a.crew_size?m(t.job_size,t.origin?t.origin.floor:t.destination.floor,t.destination?t.destination.floor:t.origin.floor):t.crew_size,job_rate:t.crew_size===a.crew_size?v(t.pick_up_date)[m(t.job_size,t.origin?t.origin.floor:t.destination.floor,t.destination?t.destination.floor:t.origin.floor)-2]:t.job_rate,estimated_time:f(),estimated_quote:[f()[0]*v(t.pick_up_date)[t.crew_size-2],f()[1]*v(t.pick_up_date)[t.crew_size-2]]}))},children:"Recalculate"})]})]})},St=a(119),Mt=Object(o.a)((function(e){return{root:{},grid:{marginTop:e.spacing(2)}}}));t.default=function(e){var t=e.match,a=e.history,r=Mt(),o=t.params.id,u=Object(z.c)((function(e){return e.calendar})).event,m=Object(z.c)((function(e){return e.employees})).users,h=Object(z.c)((function(e){return e.rates})).rates;Object.assign({},u);var p=Object(i.useState)(u),x=Object(n.a)(p,2),O=x[0],f=x[1],g=Object(i.useState)(!1),v=Object(n.a)(g,2),y=v[0],_=v[1],w=Object(i.useState)(!1),S=Object(n.a)(w,2),M=S[0],N=S[1],I=Object(z.b)();if(Object(i.useEffect)((function(){return I(Object(C.g)(o)),I(Object(xt.c)()),I(Object(St.a)()),function(){I(Object(C.b)())}}),[I,o]),Object(i.useEffect)((function(){return f(u),function(){f(null)}}),[u]),!u||!O)return null;var B={job_duration:u.estimated_time[0],total_amount:u.estimated_quote[0],job_status:"Completed",user_ids:[]};return Object(k.jsx)(b.a,{className:r.root,title:"Job Details",children:Object(k.jsx)(c.a,{sx:{backgroundColor:"background.default",minHeight:"100%",paddingY:8},children:Object(k.jsxs)(s.a,{maxWidth:!1,children:[Object(k.jsx)(T,{job:u,history:a}),Object(k.jsxs)(l.a,{className:r.grid,container:!0,spacing:2,children:[Object(k.jsx)(l.a,{item:!0,md:4,xl:3,xs:12,children:Object(k.jsxs)(l.a,{container:!0,spacing:2,children:[Object(k.jsx)(l.a,{item:!0,xs:12,children:Object(k.jsx)(he,{customer:u.customer,job:u,init:B,users:m})}),!function(e,t){var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(var i=0,r=a;i<r.length;i++){var o=r[i];if(e[o]!==t[o])return!1}return!0}(u,O)&&Object(k.jsx)(l.a,{item:!0,xs:12,children:Object(k.jsx)(wt,{formState:O,event:u,dispatch:I,setFormState:f,rates:h,recalc:y,setRecalc:_,saveAndUpdate:M,setSaveAndUpdate:N})}),Object(k.jsx)(l.a,{item:!0,xs:12,children:Object(k.jsx)(pt,{customer:u.customer,event:u,history:a})})]})}),Object(k.jsx)(l.a,{item:!0,md:8,xl:9,xs:12,children:Object(k.jsx)(it,{job:u,dispatch:I,setFormState:f,formState:O,recalc:y,setRecalc:_,saveAndUpdate:M,setSaveAndUpdate:N})}),Object(k.jsx)(l.a,{item:!0,md:3,xs:12}),Object(k.jsx)(d.a,{style:{marginTop:40,width:"100%"}}),Object(k.jsxs)(l.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justifyContent:"center",children:[Object(k.jsx)(c.a,{mt:5,style:{width:"100%",maxWidth:700,textAlign:"center"},children:Object(k.jsx)(c.a,{children:Object(k.jsxs)(j.a,{variant:"body1",children:["Status provided by InsightMoving. Last updated on"," ",xe()(null===u||void 0===u?void 0:u.updated_at).format("MMMM Do YYYY, h:mm:ss a")]})})}),Object(k.jsx)(c.a,{style:{width:"100%",maxWidth:700,textAlign:"center",fontStyle:"italic"},children:Object(k.jsx)(c.a,{mt:2,pb:10,children:Object(k.jsxs)(j.a,{variant:"body2",color:"textSecondary",children:[Object(k.jsx)("span",{style:{color:"red",marginRight:5,fontWeight:600},children:"NOTICE:"}),"InsightMoving authorizes you to use our order status system for your convinience only. Any other use of the system and information is strictly prohibited."]})})})]})]})]})})})}},421:function(e,t,a){"use strict";a(0);var n=a(5),i=a(16),r=a(10),o=a(3),c=a(20),s=a(226),l=a(1),d=["className","color","children"],j=Object(s.a)((function(e){return{root:{fontWeight:600,letterSpacing:.5,minWidth:20,padding:e.spacing(.5,1),borderRadius:4},primary:{color:e.palette.primary.main,backgroundColor:Object(c.a)(e.palette.primary.main,.08)},secondary:{color:e.palette.secondary.main,backgroundColor:Object(c.a)(e.palette.secondary.main,.08)},error:{color:e.palette.error.main,backgroundColor:Object(c.a)(e.palette.error.main,.08)},success:{color:e.palette.success.main,backgroundColor:Object(c.a)(e.palette.success.main,.08)},warning:{color:e.palette.warning.main,backgroundColor:Object(c.a)(e.palette.warning.main,.08)}}}));function b(e){var t=e.className,a=e.color,c=e.children,s=Object(r.a)(e,d),b=j();return Object(l.jsx)("span",Object(n.a)(Object(n.a)({className:Object(o.a)(b.root,Object(i.a)({},b[a],a),t)},s),{},{children:c}))}b.defaultProps={className:"",color:"secondary"};var u=b;t.a=function(e){var t={Completed:{text:"Completed",color:"success"},Canceled:{text:"Canceled",color:"error"},"Needs Attention":{text:"Needs Attention",color:"warning"},Confirmed:{text:"Confirmed",color:"primary"}}[e.status],a=t.text,n=t.color;return Object(l.jsx)(u,{color:n,children:a})}},443:function(e,t,a){"use strict";var n=a(15),i=a.n(n),r=a(1),o=i()(Object(r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(r.jsx)("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"})}),"Users");t.a=o},444:function(e,t,a){"use strict";var n=a(15),i=a.n(n),r=a(1),o=i()(Object(r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:[Object(r.jsx)("path",{d:"M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"}),Object(r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z",clipRule:"evenodd"})]}),"CurrencyDollar");t.a=o},480:function(e,t,a){"use strict";var n=a(15),i=a.n(n),r=a(1),o=i()(Object(r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(r.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Trash");t.a=o}}]);