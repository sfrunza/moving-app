(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[12],{427:function(e,a,t){"use strict";var r=t(2),s=t(66),n=t(4),c=t(0),i=(t(104),t(6),t(3)),l=t(7),o=t(63),d=t(20),u=t(42),m=Object(u.a)(c.createElement("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz"),j=t(117);var b=Object(l.a)((function(e){return{root:{display:"flex",marginLeft:e.spacing(.5),marginRight:e.spacing(.5),backgroundColor:e.palette.grey[100],color:e.palette.grey[700],borderRadius:2,cursor:"pointer","&:hover, &:focus":{backgroundColor:e.palette.grey[200]},"&:active":{boxShadow:e.shadows[0],backgroundColor:Object(d.c)(e.palette.grey[200],.12)}},icon:{width:24,height:16}}}),{name:"PrivateBreadcrumbCollapsed"})((function(e){var a=e.classes,t=Object(n.a)(e,["classes"]);return c.createElement(j.a,Object(r.a)({component:"li",className:a.root,focusRipple:!0},t),c.createElement(m,{className:a.icon}))}));var h=c.forwardRef((function(e,a){var t=e.children,l=e.classes,d=e.className,u=e.component,m=void 0===u?"nav":u,j=e.expandText,h=void 0===j?"Show path":j,p=e.itemsAfterCollapse,O=void 0===p?1:p,x=e.itemsBeforeCollapse,f=void 0===x?1:x,g=e.maxItems,v=void 0===g?8:g,w=e.separator,y=void 0===w?"/":w,_=Object(n.a)(e,["children","classes","className","component","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"]),N=c.useState(!1),C=N[0],S=N[1],k=c.Children.toArray(t).filter((function(e){return c.isValidElement(e)})).map((function(e,a){return c.createElement("li",{className:l.li,key:"child-".concat(a)},e)}));return c.createElement(o.a,Object(r.a)({ref:a,component:m,color:"textSecondary",className:Object(i.a)(l.root,d)},_),c.createElement("ol",{className:l.ol},function(e,a,t){return e.reduce((function(r,s,n){return n<e.length-1?r=r.concat(s,c.createElement("li",{"aria-hidden":!0,key:"separator-".concat(n),className:a},t)):r.push(s),r}),[])}(C||v&&k.length<=v?k:function(e){return f+O>=e.length?e:[].concat(Object(s.a)(e.slice(0,f)),[c.createElement(b,{"aria-label":h,key:"ellipsis",onClick:function(e){S(!0);var a=e.currentTarget.parentNode.querySelector("a[href],button,[tabindex]");a&&a.focus()}})],Object(s.a)(e.slice(e.length-O,e.length)))}(k),l.separator,y)))}));a.a=Object(l.a)({root:{},ol:{display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"},li:{},separator:{display:"flex",userSelect:"none",marginLeft:8,marginRight:8}},{name:"MuiBreadcrumbs"})(h)},780:function(e,a,t){"use strict";t.r(a);var r=t(29),s=t(0),n=t(225),c=t(310),i=t(379),l=t(392),o=t(381),d=t(352),u=t(55),m=t(19),j=t(63),b=t(427),h=t(364),p=t(82),O=t(1);var x=function(e){var a=e.user;return Object(O.jsxs)("div",{children:[Object(O.jsx)(j.a,{color:"textPrimary",variant:"h5",children:"Settings"}),Object(O.jsxs)(b.a,{"aria-label":"breadcrumb",separator:Object(O.jsx)(p.a,{fontSize:"small"}),style:{marginTop:8},children:[Object(O.jsx)(h.a,{color:"textPrimary",component:m.b,to:"/dashboard",variant:"subtitle2",children:"Dashboard"}),Object(O.jsx)(j.a,{color:"textSecondary",variant:"subtitle2",children:a.first_name+" "+a.last_name})]})]})},f=t(363),g=t(368),v=t(369),w=t(401),y=Object(n.a)((function(e){return{root:{boxShadow:e.shadows[1]},name:{marginTop:e.spacing(1)},avatar:{height:70,width:70}}}));var _=function(e){var a=e.user,t=y();return Object(O.jsx)(g.a,{className:t.root,children:Object(O.jsx)(v.a,{children:Object(O.jsxs)(c.a,{display:"flex",alignItems:"center",flexDirection:"column",pt:2,children:[Object(O.jsx)(w.a,{className:t.avatar,src:""}),Object(O.jsx)(j.a,{className:t.name,gutterBottom:!0,variant:"h6",color:"textPrimary",children:a.first_name+" "+a.last_name}),Object(O.jsx)(j.a,{color:"textSecondary",variant:"body1",children:a.email})]})})})},N=t(12),C=t(5),S=t(389),k=t(396),E=t(356),B=t(119),P=t(172),T=t.n(P),q=t(75),z=t(96),W=t(95),F=t(109),R=Object(n.a)((function(e){return{label:{fontWeight:500,marginBottom:e.spacing(1),display:"inline-block",color:e.palette.text.secondary},icon:{marginRight:e.spacing(2),top:6,width:20,position:"relative"},inputWidth:{width:"calc(100% - 33px)",marginLeft:33}}})),L={email:{presence:{allowEmpty:!1,message:"is required"},email:{message:"is not valid"}},phone:{presence:{allowEmpty:!1,message:"is required"},format:{pattern:/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/,message:"is not valid"}},first_name:{presence:{allowEmpty:!1,message:"is required"}},last_name:{presence:{allowEmpty:!1,message:"is required"}}},U=function(e){var a=e.user,t=e.handleUpdate,n=e.isUpdating,i={first_name:a.first_name,last_name:a.last_name,email:a.email,phone:a.phone,add_phone:a.add_phone},l=R(),o=Object(B.b)().enqueueSnackbar,u=Object(s.useState)({isValid:!1,values:i,touched:{},errors:{}}),m=Object(r.a)(u,2),j=m[0],b=m[1];Object(s.useEffect)((function(){var e=T()(j.values,L);b((function(a){return Object(C.a)(Object(C.a)({},a),{},{isValid:!e,errors:e||{}})}))}),[j.values,a]);var h=function(e){e.persist(),"phone"===e.target.name?b((function(a){return Object(C.a)(Object(C.a)({},a),{},{values:Object(C.a)(Object(C.a)({},a.values),{},{phone:"1"===e.target.value?"":Object(F.b)(Object(F.a)(e.target.value))}),touched:Object(C.a)(Object(C.a)({},a.touched),{},{phone:!0})})})):"add_phone"===e.target.name?b((function(a){return Object(C.a)(Object(C.a)({},a),{},{values:Object(C.a)(Object(C.a)({},a.values),{},{add_phone:"1"===e.target.value?"":Object(F.b)(Object(F.a)(e.target.value))}),touched:Object(C.a)(Object(C.a)({},a.touched),{},{add_phone:!0})})})):b((function(a){return Object(C.a)(Object(C.a)({},a),{},{values:Object(C.a)(Object(C.a)({},a.values),{},Object(N.a)({},e.target.name,"checkbox"===e.target.type?e.target.checked:e.target.value)),touched:Object(C.a)(Object(C.a)({},a.touched),{},Object(N.a)({},e.target.name,!0))})}))},p=function(e){return!(!j.touched[e]||!j.errors[e])};return Object(O.jsx)("form",{name:"password-reset-form",method:"post",onSubmit:function(e){e.preventDefault(),j.isValid&&(t(a.id,j.values),o("Customer updated",{anchorOrigin:{horizontal:"right",vertical:"top"},variant:"success"})),b((function(e){return Object(C.a)(Object(C.a)({},e),{},{touched:Object(C.a)(Object(C.a)({},e.touched),e.errors)})}))},children:Object(O.jsxs)(g.a,{children:[Object(O.jsx)(S.a,{title:"Profile"}),Object(O.jsx)(d.a,{}),Object(O.jsx)(v.a,{children:Object(O.jsxs)(f.a,{container:!0,spacing:3,children:[Object(O.jsxs)(f.a,{item:!0,xs:12,md:6,children:[Object(O.jsxs)("label",{htmlFor:"first_name",className:l.label,children:[Object(O.jsx)(q.a,{className:l.icon}),"First name"]}),Object(O.jsx)(k.a,{error:p("first_name"),className:l.inputWidth,name:"first_name",id:"first_name",size:"small",value:j.values.first_name||"",onChange:h,variant:"outlined",helperText:p("first_name")?j.errors.first_name:null})]}),Object(O.jsxs)(f.a,{item:!0,xs:12,md:6,children:[Object(O.jsxs)("label",{htmlFor:"last_name",className:l.label,children:[Object(O.jsx)(q.a,{className:l.icon}),"Last name"]}),Object(O.jsx)(k.a,{error:p("last_name"),className:l.inputWidth,name:"last_name",id:"last_name",size:"small",onChange:h,value:j.values.last_name,variant:"outlined",helperText:p("last_name")?j.errors.last_name:null})]}),Object(O.jsxs)(f.a,{item:!0,xs:12,md:6,children:[Object(O.jsxs)("label",{htmlFor:"email",className:l.label,children:[Object(O.jsx)(z.a,{className:l.icon}),"Email address"]}),Object(O.jsx)(k.a,{error:p("email"),className:l.inputWidth,name:"email",id:"email",size:"small",onChange:h,value:j.values.email||"",variant:"outlined",helperText:p("email")?j.errors.email[0]:null})]}),Object(O.jsxs)(f.a,{item:!0,xs:12,md:6,children:[Object(O.jsxs)("label",{htmlFor:"phone",className:l.label,children:[Object(O.jsx)(W.a,{className:l.icon}),"Phone"]}),Object(O.jsx)(k.a,{error:p("phone"),className:l.inputWidth,name:"phone",id:"phone",size:"small",onChange:h,value:j.values.phone||"",variant:"outlined",helperText:p("phone")?j.errors.phone[0]:null})]})]})}),Object(O.jsx)(c.a,{p:2,display:"flex",justifyContent:"flex-end",children:Object(O.jsx)(E.a,{color:"primary",disabled:function(e,a){var t=Object.keys(e),r=Object.keys(a);if(t.length!==r.length)return!1;for(var s=0,n=t;s<n.length;s++){var c=n[s];if(e[c]!==a[c])return!1}return!0}(j.values,i)||n,type:"submit",variant:"contained",disableElevation:!0,children:n?"Loading...":"Save Changes"})})]})})},I=t(16),M=t(68);var V=function(){var e=Object(I.b)(),a=Object(I.c)((function(e){return e.auth})),t=a.user,r=a.isUpdating;return Object(O.jsxs)(f.a,{container:!0,spacing:3,children:[Object(O.jsx)(f.a,{item:!0,lg:4,md:6,xl:3,xs:12,children:Object(O.jsx)(_,{user:t})}),Object(O.jsx)(f.a,{item:!0,lg:8,md:6,xl:9,xs:12,children:Object(O.jsx)(U,{user:t,handleUpdate:function(a,t){e(Object(M.d)(a,t))},isUpdating:r})})]})},A=t(21),D=t.n(A),H=t(36),J=t(8),G=t(3),Y=t(526),$=t(67),K=t(377),Q=t(192),X=["className","user","handlePasswordChange"],Z=Object(n.a)((function(e){return{root:{},label:{fontWeight:600,marginBottom:e.spacing(1),display:"flex",color:e.palette.text.secondary,alignItems:"baseline"},icon:{marginRight:e.spacing(2),top:6,width:20,position:"relative"},inputWidth:{width:"calc(100% - 33px)",marginLeft:33}}}));var ee=function(e){var a=e.className,t=e.user,r=e.handlePasswordChange,s=Object(J.a)(e,X),n=Z(),i=Object(B.b)().enqueueSnackbar;return Object(O.jsx)($.a,{initialValues:{password:"",password_confirmation:"",current_password:""},validationSchema:Y.a().shape({current_password:Y.c().min(6,"Must be at least 6 characters").max(255).required("Current password is required"),password:Y.c().min(6,"Must be at least 6 characters").max(255).required("New password is required"),password_confirmation:Y.c().oneOf([Y.b("password"),null],"Passwords must match").required("Required")}),onSubmit:function(){var e=Object(H.a)(D.a.mark((function e(a,s){var n,c,l,o;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.resetForm,c=s.setErrors,l=s.setStatus,o=s.setSubmitting,e.prev=1,e.next=4,r(a,t.id);case 4:n(),l({success:!0}),o(!1),i("Password updated",{variant:"success"}),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),l({success:!1}),c({submit:e.t0.message}),o(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(a,t){return e.apply(this,arguments)}}(),children:function(e){var t=e.errors,r=e.handleBlur,i=e.handleChange,l=e.handleSubmit,o=e.isSubmitting,u=e.touched,m=e.values;return Object(O.jsx)("form",{onSubmit:l,children:Object(O.jsxs)(g.a,Object(C.a)(Object(C.a)({className:Object(G.a)(n.root,a)},s),{},{children:[Object(O.jsx)(S.a,{title:"Change Password"}),Object(O.jsx)(d.a,{}),Object(O.jsxs)(v.a,{children:[Object(O.jsxs)(f.a,{container:!0,spacing:3,children:[Object(O.jsxs)(f.a,{item:!0,md:4,sm:6,xs:12,children:[Object(O.jsxs)("label",{htmlFor:"current_password",className:n.label,children:[Object(O.jsx)(Q.a,{className:n.icon}),"Current password"]}),Object(O.jsx)(k.a,{error:Boolean(u.current_password&&t.current_password),className:n.inputWidth,helperText:u.current_password&&t.current_password,name:"current_password",id:"current_password",size:"small",onBlur:r,onChange:i,type:"password",value:m.current_password,variant:"outlined"})]}),Object(O.jsxs)(f.a,{item:!0,md:4,sm:6,xs:12,children:[Object(O.jsxs)("label",{htmlFor:"password",className:n.label,children:[Object(O.jsx)(Q.a,{className:n.icon}),"New password"]}),Object(O.jsx)(k.a,{error:Boolean(u.password&&t.password),className:n.inputWidth,helperText:u.password&&t.password,name:"password",id:"password",size:"small",onBlur:r,onChange:i,type:"password",value:m.password,variant:"outlined"})]}),Object(O.jsxs)(f.a,{item:!0,md:4,sm:6,xs:12,children:[Object(O.jsxs)("label",{htmlFor:"password_confirmation",className:n.label,children:[Object(O.jsx)(Q.a,{className:n.icon}),"Password confirmation"]}),Object(O.jsx)(k.a,{error:Boolean(u.password_confirmation&&t.password_confirmation),className:n.inputWidth,helperText:u.password_confirmation&&t.password_confirmation,name:"password_confirmation",id:"password_confirmation",size:"small",onBlur:r,onChange:i,type:"password",value:m.password_confirmation,variant:"outlined"})]})]}),t.submit&&Object(O.jsx)(c.a,{mt:3,children:Object(O.jsx)(K.a,{error:!0,children:t.submit})})]}),Object(O.jsx)(c.a,{p:2,display:"flex",justifyContent:"flex-end",children:Object(O.jsx)(E.a,{color:"primary",disabled:o,type:"submit",variant:"contained",disableElevation:!0,children:"Change Password"})})]}))})}})},ae=Object(n.a)((function(e){return{root:{backgroundColor:e.palette.background.level2,minHeight:"100%"}}}));a.default=function(){var e=ae(),a=Object(s.useState)("general"),t=Object(r.a)(a,2),n=t[0],m=t[1],j=Object(I.c)((function(e){return e.auth})).user;return Object(O.jsx)(u.a,{className:e.root,title:"Settings",children:Object(O.jsx)(c.a,{sx:{backgroundColor:"background.default",minHeight:"100%",paddingY:8},children:Object(O.jsxs)(i.a,{maxWidth:!1,children:[Object(O.jsx)(x,{user:j}),Object(O.jsx)(c.a,{mt:3,children:Object(O.jsx)(l.a,{onChange:function(e,a){m(a)},scrollButtons:"auto",value:n,variant:"scrollable",textColor:"primary",indicatorColor:"primary",children:[{value:"general",label:"General"},{value:"security",label:"Security"}].map((function(e,a){return Object(O.jsx)(o.a,{label:e.label,value:e.value,wrapped:!0},a)}))})}),Object(O.jsx)(d.a,{}),Object(O.jsxs)(c.a,{mt:3,children:["general"===n&&Object(O.jsx)(V,{}),"security"===n&&Object(O.jsx)(ee,{user:j,handlePasswordChange:function(e,a){fetch("/api/v1/users/".concat(a),{method:"PUT",body:JSON.stringify({user:e}),headers:{"Content-Type":"application/json"}})}})]})]})})})}}}]);