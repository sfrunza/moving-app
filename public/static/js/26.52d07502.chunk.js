(this["webpackJsonp@devias-io/material-kit-pro-react"]=this["webpackJsonp@devias-io/material-kit-pro-react"]||[]).push([[26],{1673:function(e,a,t){"use strict";a.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/\s+/," ").split(" ").slice(0,2).map((function(e){return e&&e[0].toUpperCase()})).join("")}},2090:function(e,a,t){"use strict";t.r(a);var n=t(11),r=t(0),c=t.n(r),l=t(59),o=t(1386),i=t(412),s=t(31),m=t.n(s),u=t(131),d=t(121),p=t(7),g=t(16),b=t(2),E=t(267),f=t(1555),h=t(1355),v=t(65),j=t(210),O=t(184),k=t(1656),N=t.n(k),y=t(1766),C=Object(l.a)((function(e){return{root:{},action:{marginBottom:e.spacing(1),"& + &":{marginLeft:e.spacing(1)}},actionIcon:{marginRight:e.spacing(1)}}}));var S=function(e){var a=e.className,t=Object(p.a)(e,["className"]),n=C();return c.a.createElement(E.a,Object.assign({className:Object(b.a)(n.root,a),container:!0,justify:"space-between",spacing:3},t),c.a.createElement(E.a,{item:!0},c.a.createElement(f.a,{separator:c.a.createElement(N.a,{fontSize:"small"}),"aria-label":"breadcrumb"},c.a.createElement(h.a,{variant:"body1",color:"inherit",to:"/app",component:g.a},"Dashboard"),c.a.createElement(v.a,{variant:"body1",color:"textPrimary"},"Customers")),c.a.createElement(v.a,{variant:"h3",color:"textPrimary"},"All Customers")),c.a.createElement(E.a,{item:!0},c.a.createElement(j.a,{color:"secondary",variant:"contained",className:n.action},c.a.createElement(O.a,{fontSize:"small",className:n.actionIcon},c.a.createElement(y.a,null)),"New Customer")))},w=t(153),P=t.n(w),x=t(1372),_=t(532),A=t(861),L=t(1387),z=t(1556),I=t(1389),R=t(1390),q=t(1388),B=t(1558),D=t(414),F=t(1365),H=t(312),J=t(1560),M=t(1626),T=t(1719),W=t(1720),G=t(1673);var U=Object(l.a)((function(e){return{root:{},queryField:{width:500},bulkOperations:{position:"relative"},bulkActions:{paddingLeft:4,paddingRight:4,marginTop:6,position:"absolute",width:"100%",zIndex:2,backgroundColor:e.palette.background.default},bulkAction:{marginLeft:e.spacing(2)},avatar:{height:42,width:42,marginRight:e.spacing(1)},badge:{"& span":{right:"-12px"}}}}));function $(e){var a=e.className,t=e.customers,l=e.jobs,o=Object(p.a)(e,["className","customers","jobs"]),s=U(),m=Object(r.useState)("all"),u=Object(n.a)(m,2),d=(u[0],u[1],Object(r.useState)([])),E=Object(n.a)(d,2),f=E[0],k=E[1],N=Object(r.useState)(0),y=Object(n.a)(N,2),C=y[0],S=y[1],w=Object(r.useState)(10),$=Object(n.a)(w,2),K=$[0],Q=$[1],V=Object(r.useState)(""),X=Object(n.a)(V,2),Y=X[0],Z=X[1],ee=Object(r.useState)({isProspect:null,isReturning:null,acceptsMarketing:null}),ae=Object(n.a)(ee,2),te=ae[0],ne=(ae[1],function(e,a,t){return e.filter((function(e){var n=!0;if(a){var r=!1;["email","first_name","last_name"].forEach((function(t){null!=e[t]&&e[t].toLowerCase().includes(a.toLowerCase())&&(r=!0)})),r||(n=!1)}return Object.keys(t).forEach((function(a){var r=t[a];r&&e[a]!==r&&(n=!1)})),n}))}(t,Y,te)),re=function(e,a,t){return e.slice(a*t,a*t+t)}(ne,C,K),ce=f.length>0;f.length>0&&(f.length,t.length),f.length,t.length;return c.a.createElement(x.a,Object.assign({className:Object(b.a)(s.root,a)},o),c.a.createElement(i.a,{p:2,minHeight:56,display:"flex",alignItems:"center"},c.a.createElement(_.a,{className:s.queryField,InputProps:{startAdornment:c.a.createElement(A.a,{position:"start"},c.a.createElement(O.a,{fontSize:"small",color:"action"},c.a.createElement(M.a,null)))},onChange:function(e){e.persist(),Z(e.target.value)},placeholder:"Search by Name or Email",value:Y,variant:"outlined"}),c.a.createElement(i.a,{flexGrow:1})),ce&&c.a.createElement("div",{className:s.bulkOperations},c.a.createElement("div",{className:s.bulkActions},c.a.createElement(j.a,{variant:"outlined",className:s.bulkAction,component:g.a,to:"/app/customers/".concat(f[0],"/edit")},"Edit"))),c.a.createElement(P.a,null,c.a.createElement(i.a,{minWidth:700},c.a.createElement(L.a,null,c.a.createElement(z.a,null,c.a.createElement(I.a,null,c.a.createElement(R.a,{padding:"checkbox"}),c.a.createElement(R.a,null,"Name"),c.a.createElement(R.a,null,"Phone"),c.a.createElement(R.a,null,"Last Move"),c.a.createElement(R.a,{align:"right"},"Actions"))),c.a.createElement(q.a,null,re.map((function(e){var a=0;l.map((function(t){t.user_id===e.id&&(a+=1)}));var t=f.includes(e.id);return c.a.createElement(I.a,{hover:!0,key:e.id,selected:t},c.a.createElement(R.a,{padding:"checkbox"},c.a.createElement(B.a,{checked:t,onChange:function(a){return t=e.id,void(f.includes(t)?k((function(e){return e.filter((function(e){return e!==t}))})):k([t]));var t},value:t})),c.a.createElement(R.a,null,c.a.createElement(i.a,{display:"flex",alignItems:"center"},c.a.createElement(D.a,{className:s.avatar,src:e.avatar},Object(G.a)(e.first_name+" "+e.last_name)),c.a.createElement("div",null,c.a.createElement(h.a,{color:"inherit",component:g.a,to:"/app/customers/".concat(e.id),variant:"h6"},1===a?e.first_name+" "+e.last_name:c.a.createElement(F.a,{badgeContent:a,color:"secondary",className:s.badge},e.first_name+" "+e.last_name)),c.a.createElement(v.a,{variant:"body2",color:"textSecondary"},e.email)))),c.a.createElement(R.a,null,function(e){var a=(""+e).replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return a?"("+a[1]+") "+a[2]+"-"+a[3]:null}(e.phone)),c.a.createElement(R.a,null),c.a.createElement(R.a,{align:"right"},c.a.createElement(H.a,{component:g.a,to:"/app/customers/".concat(e.id,"/edit")},c.a.createElement(O.a,{fontSize:"small"},c.a.createElement(T.a,null))),c.a.createElement(H.a,{component:g.a,to:"/app/customers/".concat(e.id)},c.a.createElement(O.a,{fontSize:"small"},c.a.createElement(W.a,null)))))})))))),c.a.createElement(J.a,{component:"div",count:ne.length,onChangePage:function(e,a){S(a)},onChangeRowsPerPage:function(e){Q(e.target.value)},page:C,rowsPerPage:K,rowsPerPageOptions:[5,10,25]}))}$.defaultProps={customers:[]};var K=$,Q=Object(l.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3)}}}));a.default=function(){var e=Q(),a=Object(d.a)(),t=Object(r.useState)(null),l=Object(n.a)(t,2),s=l[0],p=l[1],g=Object(r.useState)(null),b=Object(n.a)(g,2),E=b[0],f=b[1],h=Object(r.useCallback)((function(){m.a.get("/api/v1/users.json").then((function(e){if(a.current){var t=e.data.users;Object.keys(t).forEach((function(e){t[e].customer||delete t[e]})),p(t)}}))}),[a]),v=Object(r.useCallback)((function(){m.a.get("/api/v1/jobs.json").then((function(e){if(a.current){var t=e.data;f(t)}}))}),[a]);return Object(r.useEffect)((function(){h(),v()}),[h]),s&&E?c.a.createElement(u.a,{className:e.root,title:"Customer List"},c.a.createElement(o.a,{maxWidth:!1},c.a.createElement(S,null),s&&c.a.createElement(i.a,{mt:3},c.a.createElement(K,{customers:s,jobs:E})))):null}}}]);
//# sourceMappingURL=26.52d07502.chunk.js.map