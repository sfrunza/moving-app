(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[17],{880:function(e,t,n){"use strict";n.r(t);var a=n(12),r=n.n(a),c=n(26),i=n(36),o=n(5),l=n(0),d=n(19),s=n.n(d),u=n(48),p=n(585),f=n(506),b=n(587),h=n(588),j=n(589),m=n(590),g=(n(591),n(592),n(593),n(594),n(227)),v=n(376),x=n(42),y=n(314),O=n(379),w=n(355),k=n(223),D=n(20),Y=n(7),M=n(359),_=n(9),C=n(354),N=n(867),T=n(360),P=n(62),I=n(310),z=n(595),H=n.n(z),S=n(596),R=n.n(S),A=n(58),E=n.n(A),W=n(1),L=["date","onDateNext","onDatePrev","onDateToday","onViewChange","view"],B=[{icon:H.a,label:"Month",value:"dayGridMonth"},{icon:R.a,label:"Week",value:"timeGridWeek"}],F=function(e){var t=e.date,n=e.onDateNext,a=e.onDatePrev,r=e.onDateToday,c=e.onViewChange,i=e.view,l=Object(_.a)(e,L);return Object(W.jsxs)(C.a,Object(o.a)(Object(o.a)({alignItems:"center",container:!0,justifyContent:"space-between",spacing:3},l),{},{children:[Object(W.jsx)(C.a,{item:!0,children:Object(W.jsxs)(N.a,{size:"small",children:[Object(W.jsx)(T.a,{onClick:a,children:"Prev"}),Object(W.jsx)(T.a,{onClick:r,children:"Today"}),Object(W.jsx)(T.a,{onClick:n,children:"Next"})]})}),Object(W.jsx)(C.a,{item:!0,children:Object(W.jsx)(P.a,{color:"textPrimary",variant:"h5",children:E()(t).format("MMMM YYYY")})}),Object(W.jsx)(C.a,{item:!0,children:Object(W.jsx)(y.a,{sx:{color:"text.primary"},children:B.map((function(e){var t=e.icon;return Object(W.jsx)(v.a,{title:e.label,children:Object(W.jsx)(I.a,{color:e.value===i?"primary":"inherit",onClick:function(){return t=e.value,void(c&&c(t));var t},children:Object(W.jsx)(t,{fontSize:"small"})})},e.value)}))})})]}))},G=n(24),V=n(25),J=function(){function e(){Object(G.a)(this,e),this.CONTAINER_ID=null,this.initialized=!1}return Object(V.a)(e,[{key:"configure",value:function(e){this.CONTAINER_ID=e.containerId}},{key:"initialize",value:function(e){if(!this.initialized&&document&&e.containerId){this.configure(e);var t=document.createElement("script"),n=document.createElement("noscript");t.innerHTML="\n      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n      })(window,document,'script','dataLayer','".concat(this.CONTAINER_ID,"');\n    "),n.innerHTML='\n      <iframe src="https://www.googletagmanager.com/ns.html?id='.concat(this.CONTAINER_ID,'" height="0" width="0" style="display:none;visibility:hidden"></iframe>\n    '),document.head.insertBefore(t,document.head.childNodes[0]),document.body.insertBefore(n,document.body.childNodes[0])}}},{key:"push",value:function(){var e;window&&(window.dataLayer||(window.dataLayer=[]),(e=window.dataLayer).push.apply(e,arguments))}}]),e}(),q=new J,U=n(115),K=n(119),Q=n(22),X=n(121),Z=Object(k.a)("div")((function(e){var t=e.theme;return{"& .fc-license-message":{display:"none"},"& .fc":{"--fc-bg-event-opacity":1,"--fc-border-color":t.palette.divider,"--fc-daygrid-event-dot-width":"10px","--fc-event-text-color":t.palette.text.primary,"--fc-list-event-hover-bg-color":t.palette.background.level2,"--fc-neutral-bg-color":t.palette.background.default,"--fc-page-bg-color":t.palette.background.default,"--fc-today-bg-color":Object(D.a)(t.palette.primary.main,.25),color:t.palette.text.primary,fontFamily:t.typography.fontFamily},"& .fc .fc-col-header-cell-cushion":{paddingBottom:"10px",paddingTop:"10px"},"& .fc .fc-day-other .fc-daygrid-day-top":{color:t.palette.text.secondary},"& .fc-daygrid-event":{padding:"10px"},"& .fc-day-header":Object(o.a)(Object(o.a)({},t.typography.subtitle2),{},{fontWeight:t.typography.fontWeightMedium,color:t.palette.text.secondary,padding:t.spacing(1),backgroundColor:t.palette.background.level2}),"& .fc-right":{display:"flex"},"& .fc-unthemed td.fc-today":{backgroundColor:t.palette.background.level2},"& .fc-unthemed .fc-divider, .fc-unthemed .fc-popover .fc-header, .fc-unthemed .fc-list-heading td":{backgroundColor:t.palette.background.level2},"& .fc-unthemed .fc-list-empty":{backgroundColor:t.palette.background.level2},"& .fc-event":{fontSize:10,lineHeight:1.2,border:"none",backgroundColor:"transparent",color:"#000","&:hover":{color:"#000"}},"& .fc-day-number":{float:"left !important"}}})),$=Object(g.a)((function(e){return{hoverName:{fontWeight:600,"&:hover":{textDecoration:"underline"}},rateBox:{display:"flex",justifyContent:"flex-end",alignItems:"center",position:"relative",top:4,marginRight:4,fontSize:8,color:e.palette.text.secondary}}}));function ee(e,t){if(!e)return null;for(var n=0;n<e.length;n++)if(e[n].date===t)return e[n]}var te=Object(Y.a)((function(e){return{tooltip:{backgroundColor:"#f5f5f7",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,border:"1px solid #dadde9"}}}))(v.a);t.default=function(e){var t=$(),n=Object(Q.b)(),a=Object(x.a)(),d=Object(l.useRef)(null),g=Object(M.a)((function(e){return e.breakpoints.down("sm")})),v=Object(Q.c)((function(e){return e.calendar})).events,k=Object(K.b)().enqueueSnackbar,D=Object(Q.c)((function(e){return e.rates})).rates,Y=Object(l.useState)(new Date),_=Object(i.a)(Y,2),C=_[0],N=_[1],T=Object(l.useState)(g?"listWeek":"dayGridMonth"),P=Object(i.a)(T,2),I=P[0],z=P[1];Object(l.useEffect)((function(){q.push({event:"page_view"})}),[]),Object(l.useEffect)((function(){n(Object(U.f)()),n(Object(X.a)())}),[n]);var H=[];null===v||void 0===v||v.map((function(e){var t=E()(e.pick_up_date).format("MM/DD/YYYY"),n=ee(D,t),a=e.customer.first_name+" "+e.customer.last_name[0]+".";return H.push(Object(o.a)(Object(o.a)({},e),{},{title:a,start:e.pick_up_date,rendering:n})),null}));var S=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.event,e.prev=1,e.next=4,n(Object(U.i)(a.id,{start:E()(a.start).format("YYYY-MM-DDTHH:mm:ss"),end:E()(a.end).format("YYYY-MM-DDTHH:mm:ss")}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(c.a)(r.a.mark((function e(t){var a,c,i,o,l,d,s,u,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.event,c=E()(a.start).format("MM/DD/YYYY"),i=a.extendedProps.crew_size,o=a.extendedProps.estimated_time,l=ee(D,c),d=l.rates,s=l.rate_type,u=parseInt(d[i-2]),p=o.map((function(e,t){return e*u})),console.log(p),e.prev=10,e.next=13,n(Object(U.i)(a.id,{pick_up_date:E()(a.start).format("YYYY-MM-DDTHH:mm:ss"),end:E()(a.start).format("YYYY-MM-DDTHH:mm:ss"),job_rate:u,estimated_quote:"{".concat(p,"}"),rate_type:s}));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),console.error(e.t0);case 18:k("Job updated",{anchorOrigin:{horizontal:"right",vertical:"top"},variant:"success"});case 19:case"end":return e.stop()}}),e,null,[[10,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(W.jsx)(u.a,{title:"Calendar",style:{minWidth:1400},children:Object(W.jsx)(y.a,{sx:{backgroundColor:"background.default",minHeight:"100%",paddingY:8},children:Object(W.jsxs)(O.a,{maxWidth:!1,children:[Object(W.jsx)(y.a,{mt:3,children:Object(W.jsx)(F,{date:C,onDateNext:function(){var e=d.current;if(e){var t=e.getApi();t.next(),N(t.getDate())}},onDatePrev:function(){var e=d.current;if(e){var t=e.getApi();t.prev(),N(t.getDate())}},onDateToday:function(){var e=d.current;if(e){var t=e.getApi();t.today(),N(t.getDate())}},onViewChange:function(e){var t=d.current;t&&(t.getApi().changeView(e),z(e))},view:I})}),Object(W.jsx)(w.a,{style:{marginTop:24,padding:16,boxShadow:a.shadows[1]},children:Object(W.jsx)(Z,{children:Object(W.jsx)(p.a,{allDayMaintainDuration:!0,dayMaxEventRows:3,droppable:!0,dayRender:function(e){var n=e.date,a=e.el,r=(e.view,E()(n).format("MM/DD/YYYY")),c=ee(D,r);if(!c)return null;var i=c.rates,o=c.rate_type,l="transparent";"regular"===o&&(l="rgb(0 186 93 / 25%)"),"subpick"===o&&(l="rgba(253 201 9 / 25%)"),"pick"===o&&(l="rgba(251 0 9 / 25%)");var d={backgroundColor:l,padding:"0px 2px"},u=Object(W.jsx)(y.a,{className:t.rateBox,children:Object(W.jsxs)(y.a,{style:d,children:[i[0],"/",i[1],"/",i[2]]})});return s.a.render(u,a),a},editable:!0,eventClick:function(t){e.history.push("/dashboard/jobs/".concat(t.event.id))},eventDisplay:"block",eventDrop:R,eventResizableFromStart:!0,eventResize:S,events:H,eventRender:function(e){var n=e.event,r=e.el,c=n.extendedProps.job_type,i=n.extendedProps.job_status,o=v.filter((function(e){return e.customer.id===n.extendedProps.customer.id})).length,l=n.extendedProps.crew_size,d=n.extendedProps.estimated_time,u=E()(n.extendedProps.pick_up_date).format("hA"),p="",f=a.palette.primary.main;"Completed"===i?f=a.palette.success.main:"Needs Attention"===i?f=a.palette.warning.main:"Canceled"===i&&(f=a.palette.error.main),"Unloading Help"===c?p="U":"Loading Help"===c?p="L":"Inside Move"===c?p="I":"Moving with Storage"===c?p="\u2192 S]":"Packing Only"===c?p="P":"Moving from Storage"===c&&(p="[S \u2192");var b=Object(W.jsxs)(y.a,{display:"flex",alignItems:"center",className:"fc-title",children:[Object(W.jsx)(y.a,{style:{width:35},children:u}),Object(W.jsx)(y.a,{style:{color:"".concat(f)},className:t.hoverName,children:n.title}),o>1?Object(W.jsx)("span",{style:{fontSize:8,position:"relative",fontWeight:600,bottom:5,color:"#00F"},children:o}):null,Object(W.jsx)(y.a,{flexGrow:1}),Object(W.jsx)(y.a,{style:{marginRight:"5px",display:"flex"},children:"P"===p?Object(W.jsx)("img",{src:"https://freeiconshop.com/wp-content/uploads/edd/box-outline-filled.png",alt:"box",style:{width:10}}):p}),Object(W.jsx)(te,{title:Object(W.jsxs)(y.a,{children:[Object(W.jsx)("p",{children:n.extendedProps.job_size}),Object(W.jsxs)("b",{children:[d[0],d[1]?" - "+d[1]:null," hr"]})]}),placement:"top-start",children:Object(W.jsxs)(y.a,{children:[l,"/",Math.floor(d[0])]})})]});return s.a.render(b,r),r},header:!1,height:800,initialDate:C,plugins:[f.d,b.a,h.a,j.a,m.a],ref:d,rerenderDelay:10,select:function(e){var t=d.current;t&&t.getApi().unselect();n(Object(U.h)(e.start,e.end))},weekends:!0})})})]})})})}}}]);