(this["webpackJsonp@devias-io/material-kit-pro-react"]=this["webpackJsonp@devias-io/material-kit-pro-react"]||[]).push([[27],{2092:function(e,a,t){"use strict";t.r(a);var n=t(11),l=t(0),i=t.n(l),r=t(59),c=t(1386),o=t(413),s=t(31),u=t.n(s),m=t(131),d=t(121),b=t(7),p=t(16),g=t(2),f=t(267),E=t(1555),v=t(1355),j=t(65),h=t(1656),O=t.n(h),y=Object(r.a)((function(e){return{root:{},action:{marginBottom:e.spacing(1),"& + &":{marginLeft:e.spacing(1)}},actionIcon:{marginRight:e.spacing(1)}}}));var k=function(e){var a=e.className,t=Object(b.a)(e,["className"]),n=y();return i.a.createElement(f.a,Object.assign({container:!0,spacing:3,justify:"space-between",className:Object(g.a)(n.root,a)},t),i.a.createElement(f.a,{item:!0},i.a.createElement(E.a,{separator:i.a.createElement(O.a,{fontSize:"small"}),"aria-label":"breadcrumb"},i.a.createElement(v.a,{variant:"body1",color:"inherit",to:"/app",component:p.a},"Dashboard"),i.a.createElement(j.a,{variant:"body1",color:"textPrimary"},"Jobs")),i.a.createElement(j.a,{variant:"h3",color:"textPrimary"},"All Jobs")))},C=t(17),S=t(5),N=t.n(S),x=t(153),_=t.n(x),w=t(6),A=t(1372),Y=t(533),D=t(861),P=t(184),L=t(210),M=t(1387),F=t(1556),J=t(1389),z=t(1390),B=t(1388),I=t(1558),R=t(312),T=t(1560),q=t(1626),G=t(1719),W=t(1720),H=t(268),K=[{id:"all",name:"All"},{id:"completed",name:"Completed"},{id:"canceled",name:"Canceled"},{id:"needsAttention",name:"Needs Attention"},{id:"confirmed",name:"Confirmed"}];var Q=Object(r.a)((function(e){return{root:{},bulkOperations:{position:"relative"},bulkActions:{paddingLeft:4,paddingRight:4,marginTop:6,position:"absolute",width:"100%",zIndex:2,backgroundColor:e.palette.background.default},bulkAction:{marginLeft:e.spacing(2)},queryField:{width:500},categoryField:{flexBasis:200},availabilityField:{marginLeft:e.spacing(2),flexBasis:200},stockField:{marginLeft:e.spacing(2)},shippableField:{marginLeft:e.spacing(2)},imageCell:{fontSize:0,width:68,flexBasis:68,flexGrow:0,flexShrink:0},image:{height:68,width:68},pastDate:{color:w.a.deepOrange[500]}}}));function U(e){var a=e.className,t=e.jobs,r=e.users,c=Object(b.a)(e,["className","jobs","users"]),s=Q(),u=N()().toJSON().slice(0,10),m=Object(l.useState)([]),d=Object(n.a)(m,2),f=d[0],E=d[1],j=Object(l.useState)(0),h=Object(n.a)(j,2),O=h[0],y=h[1],k=Object(l.useState)(10),S=Object(n.a)(k,2),x=S[0],w=S[1],U=Object(l.useState)(""),V=Object(n.a)(U,2),X=V[0],Z=V[1],$=Object(l.useState)({category:null,availability:null,inStock:null,isShippable:null}),ee=Object(n.a)($,2),ae=ee[0],te=ee[1],ne=function(e,a,t,n){return e.filter((function(e){var l=!0,i=e.user_id,r="",c="";return a.map((function(e){i===e.id&&(r=e.first_name,c=e.last_name)})),!t||r.toLowerCase().includes(t.toLowerCase())||c.toLowerCase().includes(t.toLowerCase())||e.id.toString().includes(t.toLowerCase())||(l=!1),n.category&&e.category!==n.category&&(l=!1),n.availability&&("confirmed"!==n.availability||["Confirmed"].includes(e.job_status)||(l=!1),"completed"!==n.availability||["Completed"].includes(e.job_status)||(l=!1),"needsAttention"!==n.availability||["Needs Attention"].includes(e.job_status)||(l=!1),"canceled"!==n.availability||["Canceled"].includes(e.job_status)||(l=!1)),n.inStock&&!["Needs Attention"].includes(e.job_status)&&(l=!1),n.isShippable&&!e.isShippable&&(l=!1),l}))}(t,r,X,ae),le=function(e,a,t){return e.slice(a*t,a*t+t)}(ne,O,x),ie=f.length>0;f.length>0&&(f.length,t.length),f.length,t.length;return i.a.createElement(A.a,Object.assign({className:Object(g.a)(s.root,a)},c),i.a.createElement(o.a,{p:2},i.a.createElement(o.a,{display:"flex",alignItems:"center"},i.a.createElement(Y.a,{className:s.queryField,InputProps:{startAdornment:i.a.createElement(D.a,{position:"start"},i.a.createElement(P.a,{fontSize:"small",color:"action"},i.a.createElement(q.a,null)))},onChange:function(e){e.persist(),Z(e.target.value)},placeholder:"Search by ID or Name",value:X,variant:"outlined"}),i.a.createElement(o.a,{flexGrow:1}),i.a.createElement(Y.a,{className:s.availabilityField,label:"Sort By Status",name:"availability",onChange:function(e){e.persist();var a=null;"all"!==e.target.value&&(a=e.target.value),te((function(e){return Object(C.a)(Object(C.a)({},e),{},{availability:a})}))},select:!0,SelectProps:{native:!0},value:ae.availability||"all",variant:"outlined"},K.map((function(e){return i.a.createElement("option",{key:e.id,value:e.id},e.name)}))))),ie&&i.a.createElement("div",{className:s.bulkOperations},i.a.createElement("div",{className:s.bulkActions},i.a.createElement(L.a,{variant:"outlined",className:s.bulkAction},"Delete"),i.a.createElement(L.a,{variant:"outlined",className:s.bulkAction},"Edit"))),i.a.createElement(_.a,null,i.a.createElement(o.a,{minWidth:1200},i.a.createElement(M.a,null,i.a.createElement(F.a,null,i.a.createElement(J.a,null,i.a.createElement(z.a,{padding:"checkbox"}),i.a.createElement(z.a,null,"Job ID"),i.a.createElement(z.a,null,"Customer"),i.a.createElement(z.a,null,"Moving Date"),i.a.createElement(z.a,null,"Type of Service"),i.a.createElement(z.a,null,"Status"),i.a.createElement(z.a,null,"Submitted"),i.a.createElement(z.a,{align:"right"},"Actions"))),i.a.createElement(B.a,null,le.map((function(e){var a=f.includes(e.id),t=e.user_id,n="";return r.map((function(e){t===e.id&&(n=e.first_name+" "+e.last_name)})),i.a.createElement(J.a,{hover:!0,key:e.id,selected:a},i.a.createElement(z.a,{padding:"checkbox"},i.a.createElement(I.a,{checked:a,onChange:function(a){return t=e.id,void(f.includes(t)?E((function(e){return e.filter((function(e){return e!==t}))})):E([t]));var t},value:a})),i.a.createElement(z.a,null,i.a.createElement(v.a,{variant:"subtitle2",color:"textPrimary",component:p.a,underline:"none",to:"/app/jobs/".concat(e.id)},"#",e.id)),i.a.createElement(z.a,null,n),u>N()(e.pick_up_date).format("YYYY-MM-DD")?i.a.createElement(z.a,{className:s.pastDate},N()(e.pick_up_date).format("MMM DD YYYY")):i.a.createElement(z.a,null,N()(e.pick_up_date).format("MMM DD YYYY")),i.a.createElement(z.a,null,e.job_type),i.a.createElement(z.a,null,function(e){var a={Completed:{text:"Completed",color:"secondary"},Canceled:{text:"Canceled",color:"error"},"Needs Attention":{text:"Needs Attention",color:"warning"},Confirmed:{text:"Confirmed",color:"success"}}[e],t=a.text,n=a.color;return i.a.createElement(H.a,{color:n},t)}(e.job_status)),i.a.createElement(z.a,null,N()(e.created_at).format("MMM DD YYYY")),i.a.createElement(z.a,{align:"right"},i.a.createElement(R.a,null,i.a.createElement(P.a,{fontSize:"small"},i.a.createElement(G.a,null))),i.a.createElement(R.a,null,i.a.createElement(v.a,{variant:"subtitle2",color:"textPrimary",component:p.a,underline:"none",to:"/app/jobs/".concat(e.id)},i.a.createElement(P.a,{fontSize:"small"},i.a.createElement(W.a,null))))))})))),i.a.createElement(T.a,{component:"div",count:ne.length,onChangePage:function(e,a){y(a)},onChangeRowsPerPage:function(e){w(e.target.value)},page:O,rowsPerPage:x,rowsPerPageOptions:[5,10,25]}))))}U.defaultProps={jobs:[]};var V=U,X=Object(r.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:100}}}));a.default=function(){var e=X(),a=Object(d.a)(),t=Object(l.useState)(null),r=Object(n.a)(t,2),s=r[0],b=r[1],p=Object(l.useState)(null),g=Object(n.a)(p,2),f=g[0],E=g[1],v=Object(l.useCallback)((function(){u.a.get("/api/v1/jobs.json").then((function(e){a.current&&b(e.data)}))}),[a]),j=Object(l.useCallback)((function(){u.a.get("/api/v1/users.json").then((function(e){a.current&&E(e.data.users)}))}),[a]);return Object(l.useEffect)((function(){v(),j()}),[v,j]),s&&f?i.a.createElement(m.a,{className:e.root,title:"Job List"},i.a.createElement(c.a,{maxWidth:!1},i.a.createElement(k,null),s&&i.a.createElement(o.a,{mt:5},i.a.createElement(V,{jobs:s,users:f})))):null}}}]);
//# sourceMappingURL=27.53554b29.chunk.js.map